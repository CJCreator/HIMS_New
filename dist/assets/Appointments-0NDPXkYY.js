import{g as G,c as H,u as I,r as t,j as e}from"./vendor-react-DgLHP6bv.js";import{u as J}from"./feature-patient-CwIgoHzQ.js";import{a as l,C as d,I as K,b as T,c as L,d as Q}from"./components-shared-xUUHivoC.js";import{t as g}from"./vendor-other-GA8idrW8.js";import"./vendor-redux-Bm7kM3lO.js";import"./feature-laboratory-CrtyfW6q.js";import"./vendor-utils-BK7WLMRy.js";import"./vendor-charts-CR2zRRjt.js";import"./vendor-ui-B-dksMZM.js";const N=({className:r})=>e.jsx("span",{className:r,children:"ðŸ“…"}),X=({className:r})=>e.jsx("span",{className:r,children:"ðŸ•"}),Y=({className:r})=>e.jsx("span",{className:r,children:"ðŸ‘¤"}),ie=()=>{const r=G(),P=H(),{appointments:v}=I(s=>s.appointments),{user:i}=I(s=>s.auth),[j,V]=t.useState(new Date().toISOString().split("T")[0]),[C,w]=t.useState("day"),[o,$]=t.useState(""),[m,z]=t.useState("all"),[a,S]=t.useState(null),[O,x]=t.useState(!1),[B,h]=t.useState(!1),[f,b]=t.useState(""),[y,D]=t.useState(""),[k,A]=t.useState({}),c=t.useMemo(()=>v.filter(s=>s.doctorName===((i==null?void 0:i.name)||"Dr. Wilson")),[v,i==null?void 0:i.name]),u=t.useMemo(()=>c.filter(s=>{const n=s.date===j,U=s.patientName.toLowerCase().includes(o.toLowerCase())||s.patientId.toLowerCase().includes(o.toLowerCase()),q=m==="all"||s.status===m;return n&&U&&q}),[c,j,o,m]),p=t.useMemo(()=>({confirmed:c.filter(s=>s.status==="confirmed").length,pending:c.filter(s=>s.status==="scheduled").length,completed:c.filter(s=>s.status==="completed").length,cancelled:c.filter(s=>s.status==="cancelled").length}),[c]),M=async s=>{A(n=>({...n,[s.id]:!0}));try{r(J({id:s.id,status:"in-progress"})),g.success(`Starting consultation with ${s.patientName}`),P(`/doctor/consultation/${s.patientId}`)}catch{g.error("Failed to start consultation")}finally{A(n=>({...n,[s.id]:!1}))}},E=s=>{S(s),x(!0)},F=s=>{S(s),b(s.date),D(s.time),h(!0)},W=()=>{if(!f||!y){g.error("Please select date and time");return}r(Q({type:"success",title:"Appointment Rescheduled",message:`Appointment with ${a.patientName} rescheduled to ${f} at ${y}`,priority:"medium",category:"appointment"})),g.success("Appointment rescheduled successfully"),h(!1)},R=s=>{switch(s){case"confirmed":return"delivered";case"scheduled":return"pending";case"in-progress":return"sent";case"completed":return"delivered";case"cancelled":return"error";default:return"pending"}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"My Appointments"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your consultation schedule"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{variant:C==="day"?"primary":"secondary",onClick:()=>w("day"),children:"Day View"}),e.jsx(l,{variant:C==="week"?"primary":"secondary",onClick:()=>w("week"),children:"Week View"})]})]}),e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{className:"w-5 h-5 text-gray-500"}),e.jsx("input",{type:"date",value:j,onChange:s=>V(s.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-doctor-500 focus:border-transparent"})]}),e.jsx(K,{placeholder:"Search by patient name or ID...",value:o,onChange:s=>$(s.target.value)}),e.jsxs("select",{value:m,onChange:s=>z(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-doctor-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[u.length," appointment",u.length!==1?"s":""," found"]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:u.length>0?u.map(s=>e.jsxs(d,{className:"p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Y,{className:"w-8 h-8 text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.patientName}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",s.patientId]})]})]}),e.jsx(T,{status:R(s.status),children:s.status})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:s.time})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:s.type})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(s.status==="confirmed"||s.status==="scheduled")&&e.jsx(l,{variant:"primary",size:"sm",onClick:()=>M(s),disabled:k[s.id],children:k[s.id]?"Starting...":"Start Consultation"}),s.status!=="completed"&&s.status!=="cancelled"&&e.jsx(l,{variant:"secondary",size:"sm",onClick:()=>F(s),children:"Reschedule"}),e.jsx(l,{variant:"secondary",size:"sm",onClick:()=>E(s),children:"View Details"})]})]},s.id)):e.jsxs("div",{className:"lg:col-span-2 text-center py-12",children:[e.jsx(N,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No appointments found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or select a different date."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(d,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.confirmed}),e.jsx("div",{className:"text-sm text-gray-600",children:"Confirmed"})]}),e.jsxs(d,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:p.pending}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]}),e.jsxs(d,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.completed}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),e.jsxs(d,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:p.cancelled}),e.jsx("div",{className:"text-sm text-gray-600",children:"Cancelled"})]})]}),a&&e.jsx(L,{isOpen:O,onClose:()=>x(!1),title:"Appointment Details",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Patient"}),e.jsx("p",{className:"font-medium",children:a.patientName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Patient ID"}),e.jsx("p",{className:"font-medium",children:a.patientId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Date"}),e.jsx("p",{className:"font-medium",children:a.date})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Time"}),e.jsx("p",{className:"font-medium",children:a.time})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Type"}),e.jsx("p",{className:"font-medium",children:a.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx(T,{status:R(a.status),children:a.status})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(l,{variant:"secondary",onClick:()=>x(!1),children:"Close"}),e.jsx(l,{variant:"primary",onClick:()=>{x(!1),M(a)},children:"Start Consultation"})]})]})}),a&&e.jsx(L,{isOpen:B,onClose:()=>h(!1),title:"Reschedule Appointment",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Rescheduling appointment for ",a.patientName]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Date"}),e.jsx("input",{type:"date",value:f,onChange:s=>b(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-doctor-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Time"}),e.jsx("input",{type:"time",value:y,onChange:s=>D(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-doctor-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(l,{variant:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx(l,{variant:"primary",onClick:W,children:"Confirm Reschedule"})]})]})})]})};export{ie as DoctorAppointments};
