import{i as G,c as H,u as I,r as t,j as e,d as y,U as J,a as K}from"./vendor-react-DtsOz5pv.js";import{u as Q}from"./feature-patient-Dnq0Sh1C.js";import{a as l,C as n,I as X,b as T,c as L,d as Y}from"./components-shared-yLUaqag5.js";import{t as p}from"./vendor-other-DG8If0Tp.js";import"./vendor-redux-CxpqfPS-.js";import"./feature-laboratory-DhpxEggP.js";import"./vendor-utils-DvtxXjqu.js";import"./vendor-charts-CHnEnLA1.js";import"./vendor-ui-B-dksMZM.js";const ie=()=>{const N=G(),P=H(),{appointments:v}=I(s=>s.appointments),{user:c}=I(s=>s.auth),[g,V]=t.useState(new Date().toISOString().split("T")[0]),[C,w]=t.useState("day"),[d,$]=t.useState(""),[o,z]=t.useState("all"),[a,S]=t.useState(null),[O,m]=t.useState(!1),[B,x]=t.useState(!1),[j,b]=t.useState(""),[f,D]=t.useState(""),[k,A]=t.useState({}),r=t.useMemo(()=>v.filter(s=>s.doctorName===((c==null?void 0:c.name)||"Dr. Wilson")),[v,c==null?void 0:c.name]),h=t.useMemo(()=>r.filter(s=>{const i=s.date===g,W=s.patientName.toLowerCase().includes(d.toLowerCase())||s.patientId.toLowerCase().includes(d.toLowerCase()),q=o==="all"||s.status===o;return i&&W&&q}),[r,g,d,o]),u=t.useMemo(()=>({confirmed:r.filter(s=>s.status==="confirmed").length,pending:r.filter(s=>s.status==="scheduled").length,completed:r.filter(s=>s.status==="completed").length,cancelled:r.filter(s=>s.status==="cancelled").length}),[r]),M=async s=>{A(i=>({...i,[s.id]:!0}));try{N(Q({id:s.id,status:"in-progress"})),p.success(`Starting consultation with ${s.patientName}`),P(`/doctor/consultation/${s.patientId}`)}catch{p.error("Failed to start consultation")}finally{A(i=>({...i,[s.id]:!1}))}},E=s=>{S(s),m(!0)},F=s=>{S(s),b(s.date),D(s.time),x(!0)},U=()=>{if(!j||!f){p.error("Please select date and time");return}N(Y({type:"success",title:"Appointment Rescheduled",message:`Appointment with ${a.patientName} rescheduled to ${j} at ${f}`,priority:"medium",category:"appointment"})),p.success("Appointment rescheduled successfully"),x(!1)},R=s=>{switch(s){case"confirmed":return"delivered";case"scheduled":return"pending";case"in-progress":return"sent";case"completed":return"delivered";case"cancelled":return"error";default:return"pending"}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"My Appointments"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your consultation schedule"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{variant:C==="day"?"primary":"secondary",onClick:()=>w("day"),children:"Day View"}),e.jsx(l,{variant:C==="week"?"primary":"secondary",onClick:()=>w("week"),children:"Week View"})]})]}),e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{className:"w-5 h-5 text-gray-500"}),e.jsx("input",{type:"date",value:g,onChange:s=>V(s.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-doctor-500 focus:border-transparent"})]}),e.jsx(X,{placeholder:"Search by patient name or ID...",value:d,onChange:s=>$(s.target.value)}),e.jsxs("select",{value:o,onChange:s=>z(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-doctor-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[h.length," appointment",h.length!==1?"s":""," found"]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:h.length>0?h.map(s=>e.jsxs(n,{className:"p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-8 h-8 text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.patientName}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",s.patientId]})]})]}),e.jsx(T,{status:R(s.status),children:s.status})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:s.time})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:s.type})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(s.status==="confirmed"||s.status==="scheduled")&&e.jsx(l,{variant:"primary",size:"sm",onClick:()=>M(s),disabled:k[s.id],children:k[s.id]?"Starting...":"Start Consultation"}),s.status!=="completed"&&s.status!=="cancelled"&&e.jsx(l,{variant:"secondary",size:"sm",onClick:()=>F(s),children:"Reschedule"}),e.jsx(l,{variant:"secondary",size:"sm",onClick:()=>E(s),children:"View Details"})]})]},s.id)):e.jsxs("div",{className:"lg:col-span-2 text-center py-12",children:[e.jsx(y,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No appointments found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or select a different date."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(n,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.confirmed}),e.jsx("div",{className:"text-sm text-gray-600",children:"Confirmed"})]}),e.jsxs(n,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:u.pending}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]}),e.jsxs(n,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.completed}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),e.jsxs(n,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.cancelled}),e.jsx("div",{className:"text-sm text-gray-600",children:"Cancelled"})]})]}),a&&e.jsx(L,{isOpen:O,onClose:()=>m(!1),title:"Appointment Details",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Patient"}),e.jsx("p",{className:"font-medium",children:a.patientName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Patient ID"}),e.jsx("p",{className:"font-medium",children:a.patientId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Date"}),e.jsx("p",{className:"font-medium",children:a.date})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Time"}),e.jsx("p",{className:"font-medium",children:a.time})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Type"}),e.jsx("p",{className:"font-medium",children:a.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx(T,{status:R(a.status),children:a.status})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(l,{variant:"secondary",onClick:()=>m(!1),children:"Close"}),e.jsx(l,{variant:"primary",onClick:()=>{m(!1),M(a)},children:"Start Consultation"})]})]})}),a&&e.jsx(L,{isOpen:B,onClose:()=>x(!1),title:"Reschedule Appointment",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Rescheduling appointment for ",a.patientName]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Date"}),e.jsx("input",{type:"date",value:j,onChange:s=>b(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-doctor-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Time"}),e.jsx("input",{type:"time",value:f,onChange:s=>D(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-doctor-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(l,{variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),e.jsx(l,{variant:"primary",onClick:U,children:"Confirm Reschedule"})]})]})})]})};export{ie as DoctorAppointments};
