import{d as O,m as Q,j as e,B as p,C as h,a as I,I as C,M as A,x as q,c as T,i as B,y as U,z as V,A as H,D as W,E as J,F as K}from"./index-BaUceZnW.js";import{u as Y,a as y,f as G,h as w}from"./vendor-Co8sLtJy.js";import{S as _}from"./SmartNotificationSystem-CfOdy2MK.js";import{d as P,u as k}from"./redux-29f41A6q.js";import{E as X}from"./EmptyState-DsUGf8Os.js";import{n as Z,d as ee,f as se}from"./format-DxorSBJt.js";import"./ui-DKbXx6wr.js";function R(s,n,c){const[j,g]=Z(c==null?void 0:c.in,s,n),u=E(j,g),t=Math.abs(ee(j,g));j.setDate(j.getDate()-u*t);const d=+(E(j,g)===-u),l=u*(t-d);return l===0?0:l}function E(s,n){const c=s.getFullYear()-n.getFullYear()||s.getMonth()-n.getMonth()||s.getDate()-n.getDate()||s.getHours()-n.getHours()||s.getMinutes()-n.getMinutes()||s.getSeconds()-n.getSeconds()||s.getMilliseconds()-n.getMilliseconds();return c<0?-1:c>0?1:c}function te(){const s=Y(),[n,c]=y.useState({pending:0,processing:0,completed:0,avgTime:12}),[j,g]=y.useState([]),{updateCount:u}=O();return y.useEffect(()=>{const t=Q.getPrescriptions();g(t.slice(0,3)),c({pending:t.filter(d=>d.status==="pending").length,processing:t.filter(d=>d.status==="processing").length,completed:t.filter(d=>d.status==="completed").length,avgTime:12})},[u]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Enhanced Pharmacy Dashboard"}),e.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Real-time prescription processing"})]}),e.jsx(p,{onClick:()=>s("/pharmacist/prescriptions"),children:"View Queue"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-warning",children:n.pending}),e.jsx("div",{className:"text-body text-neutral-600",children:"Pending"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-info",children:n.processing}),e.jsx("div",{className:"text-body text-neutral-600",children:"Processing"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-success",children:n.completed}),e.jsx("div",{className:"text-body text-neutral-600",children:"Completed Today"})]}),e.jsxs(h,{className:"p-4 bg-success/10",children:[e.jsxs("div",{className:"text-h2 text-success",children:[n.avgTime,"m"]}),e.jsx("div",{className:"text-body text-neutral-600",children:"Avg Processing"}),e.jsx("p",{className:"text-xs text-success",children:"â†“ 40% faster"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(h,{className:"lg:col-span-2 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-h3 text-neutral-900",children:"Live Prescription Queue"}),e.jsxs(I,{status:"error",children:[n.pending," New"]})]}),e.jsx("div",{className:"space-y-3",children:j.map(t=>{var d;return e.jsxs("div",{className:`p-4 rounded-small border-l-4 ${t.priority==="high"?"border-error bg-error/5":"border-neutral-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-body font-medium",children:t.patientName}),t.priority==="high"&&e.jsx(I,{status:"error",children:"HIGH PRIORITY"})]}),e.jsxs("p",{className:"text-body-sm text-neutral-600",children:["Prescribed by ",t.doctor," â€¢ ",((d=t.medications)==null?void 0:d.length)||0," medications"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-body-sm text-neutral-600",children:[Math.floor((Date.now()-t.timestamp)/6e4)," min ago"]})})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(p,{variant:"primary",size:"sm",onClick:()=>s("/pharmacist/prescriptions"),children:"Process Now"}),e.jsx(p,{variant:"secondary",size:"sm",onClick:()=>s(`/pharmacist/prescriptions/${t.id}`),children:"View Details"})]})]},t.id)})})]}),e.jsx("div",{children:e.jsx(_,{})})]}),e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"text-h4 text-neutral-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsx(p,{variant:"secondary",className:"justify-start",onClick:()=>s("/pharmacist/prescriptions"),children:"ðŸ’Š Prescription Queue"}),e.jsx(p,{variant:"secondary",className:"justify-start",onClick:()=>s("/pharmacist/inventory"),children:"ðŸ“¦ Inventory"}),e.jsx(p,{variant:"secondary",className:"justify-start",onClick:()=>s("/pharmacist/medication-requests"),children:"ðŸ“‹ Med Requests"}),e.jsx(p,{variant:"secondary",className:"justify-start",onClick:()=>s("/pharmacist/expiry-alerts"),children:"âš ï¸ Expiry Alerts"})]})]})]})}const ae=({className:s})=>e.jsx("span",{className:s,children:"ðŸ”"}),re=({className:s})=>e.jsx("span",{className:s,children:"ðŸ‘ï¸"}),L=({className:s})=>e.jsx("span",{className:s,children:"âœ…"}),F=({className:s})=>e.jsx("span",{className:s,children:"ðŸ•"}),le=({className:s})=>e.jsx("span",{className:s,children:"âš ï¸"}),ie=()=>{const s=P(),{prescriptions:n}=k(a=>a.prescriptions),[c,j]=y.useState(""),[g,u]=y.useState("all"),[t,d]=y.useState(null),[l,x]=y.useState(!1),N=n.filter(a=>{const v=a.patientName.toLowerCase().includes(c.toLowerCase())||a.id.toLowerCase().includes(c.toLowerCase()),b=g==="all"||a.status===g;return v&&b}),o=a=>{switch(a){case"pending":return e.jsx(F,{className:"w-4 h-4"});case"processing":return e.jsx(le,{className:"w-4 h-4"});case"ready":return e.jsx(L,{className:"w-4 h-4"});case"dispensed":return e.jsx(L,{className:"w-4 h-4"});default:return e.jsx(F,{className:"w-4 h-4"})}},i=(a,v)=>{const b=n.find(m=>m.id===a);s(q({id:a,status:v})),s(T({type:"success",title:"Prescription Updated",message:`Prescription ${a} status changed to ${v}`,priority:"medium",category:"system"})),v==="dispensed"&&b&&s(B({role:"receptionist",type:"info",title:"Prescription Dispensed",message:`${b.patientName} prescription ready for billing`,priority:"medium",category:"medication"}))},f=a=>{d(a),x(!0)};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Prescription Queue"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(C,{placeholder:"Search prescriptions...",value:c,onChange:a=>j(a.target.value),className:"pl-10 w-64"})]}),e.jsxs("select",{value:g,onChange:a=>u(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"dispensed",children:"Dispensed"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:N.map(a=>e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.patientName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a.patientId," â€¢ ",a.id]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${a.priority==="high"?"bg-red-100 text-red-800":a.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:a.priority}),e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium flex items-center gap-1 ${a.status==="pending"?"bg-yellow-100 text-yellow-800":a.status==="processing"?"bg-blue-100 text-blue-800":a.status==="ready"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:[o(a.status),a.status]})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Prescribed by"}),e.jsx("p",{className:"font-medium text-gray-900",children:a.doctorName})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Medications (",a.medications.length,")"]}),e.jsxs("div",{className:"space-y-1",children:[a.medications.slice(0,2).map((v,b)=>e.jsxs("p",{className:"text-sm text-gray-900",children:[v.name," ",v.dosage," Ã— ",v.quantity]},b)),a.medications.length>2&&e.jsxs("p",{className:"text-sm text-gray-500",children:["+",a.medications.length-2," more"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Prescription Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.prescriptionDate})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{variant:"secondary",size:"sm",onClick:()=>f(a),className:"flex-1",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"View Details"]}),a.status==="pending"&&e.jsx(p,{variant:"primary",size:"sm",onClick:()=>i(a.id,"processing"),children:"Start Processing"}),a.status==="processing"&&e.jsx(p,{variant:"primary",size:"sm",onClick:()=>i(a.id,"ready"),children:"Mark Ready"}),a.status==="ready"&&e.jsx(p,{variant:"primary",size:"sm",onClick:()=>i(a.id,"dispensed"),children:"Dispense"})]})]},a.id))}),e.jsx(A,{isOpen:l,onClose:()=>x(!1),title:"Prescription Details",size:"lg",children:t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Patient"}),e.jsx("p",{className:"text-gray-900",children:t.patientName}),e.jsx("p",{className:"text-sm text-gray-500",children:t.patientId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Prescribed by"}),e.jsx("p",{className:"text-gray-900",children:t.doctorName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date"}),e.jsx("p",{className:"text-gray-900",children:t.prescriptionDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Priority"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.priority==="high"?"bg-red-100 text-red-800":t.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:t.priority})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Medications"}),e.jsx("div",{className:"space-y-4",children:t.medications.map((a,v)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.name}),e.jsx("span",{className:"text-sm text-gray-500",children:a.dosage})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Quantity:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:a.quantity})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Frequency:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:a.frequency})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Duration:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:a.duration})]})]}),a.instructions&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Instructions:"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.instructions})]})]},v))})]}),t.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Notes"}),e.jsx("p",{className:"text-gray-900",children:t.notes})]})]})})]})},$=[{key:"request",label:"Requested",icon:"ðŸ“"},{key:"pending",label:"Pending",icon:"â³"},{key:"sent",label:"Sent to Pharmacy",icon:"ðŸ“¤"},{key:"dispatched",label:"Dispatched",icon:"ðŸš›"},{key:"received",label:"Received",icon:"ðŸ“¦"},{key:"delivered",label:"Delivered",icon:"âœ…"}],ce=({status:s,className:n=""})=>{const c=$.findIndex(j=>j.key===s);return e.jsx("div",{className:`flex items-center space-x-2 ${n}`,children:$.map((j,g)=>{const u=g<=c,t=g===c;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`
              flex items-center justify-center w-8 h-8 rounded-full text-xs font-medium
              ${u?t?"bg-blue-500 text-white":"bg-green-500 text-white":"bg-gray-200 text-gray-500"}
            `,children:j.icon}),g<$.length-1&&e.jsx("div",{className:`
                w-8 h-0.5 mx-1
                ${g<c?"bg-green-500":"bg-gray-200"}
              `})]},j.key)})})},ne=({className:s})=>e.jsx("span",{className:s,children:"ðŸ”"}),de=({className:s})=>e.jsx("span",{className:s,children:"ðŸ“¦"}),xe=({className:s})=>e.jsx("span",{className:s,children:"ðŸš›"}),oe=()=>{const s=P(),{requests:n}=k(l=>l.medication),[c,j]=y.useState(""),[g,u]=y.useState("all"),t=n.filter(l=>{const x=l.patientName.toLowerCase().includes(c.toLowerCase())||l.id.toLowerCase().includes(c.toLowerCase()),N=g==="all"||l.status===g;return x&&N}),d=(l,x)=>{const N=n.find(o=>o.id===l);s(U({id:l,status:x,processedBy:"Pharmacist John"})),s(T({type:"success",title:"Medication Request Updated",message:`Request ${l} status changed to ${x}`,priority:"medium",category:"system"})),x==="dispatched"&&N&&s(B({role:"nurse",type:"success",title:"Medication Dispatched",message:`${N.medication} for ${N.patientName} (Room ${N.roomNumber}) is on the way`,priority:"high",category:"medication"}))};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Medication Requests from Nurses"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{placeholder:"Search requests...",value:c,onChange:l=>j(l.target.value),className:"pl-10 w-64 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent"})]}),e.jsxs("select",{value:g,onChange:l=>u(l.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"request",children:"New Requests"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"dispatched",children:"Dispatched"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(l=>e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:l.patientName}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Room ",l.roomNumber," â€¢ ",l.patientId]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Requested by ",l.requestedBy]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${l.urgency==="high"?"bg-red-100 text-red-800":l.urgency==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:l.urgency})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:l.medication}),e.jsxs("p",{className:"text-sm text-gray-500",children:[l.dosage," Ã— ",l.quantity," tablets"]})]}),l.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Notes:"}),e.jsx("p",{className:"text-sm text-gray-900",children:l.notes})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(ce,{status:l.status,className:"mb-2"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Requested: ",l.requestTime,l.processedTime&&` â€¢ Processed: ${l.processedTime}`]})]}),e.jsxs("div",{className:"flex gap-2",children:[l.status==="request"&&e.jsx(p,{variant:"primary",size:"sm",onClick:()=>d(l.id,"pending"),className:"flex-1",children:"Accept Request"}),l.status==="pending"&&e.jsxs(p,{variant:"primary",size:"sm",onClick:()=>d(l.id,"sent"),className:"flex-1",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Prepare & Send"]}),l.status==="sent"&&e.jsxs(p,{variant:"primary",size:"sm",onClick:()=>d(l.id,"dispatched"),className:"flex-1",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Mark Dispatched"]}),(l.status==="dispatched"||l.status==="received"||l.status==="delivered")&&e.jsxs("div",{className:"flex-1 text-center py-2 text-sm text-gray-500",children:[l.status==="dispatched"&&"Waiting for nurse confirmation",l.status==="received"&&"Received by nurse",l.status==="delivered"&&"Delivered to patient"]})]})]},l.id))}),t.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No medication requests found"})})]})},z=({className:s})=>e.jsx("span",{className:s,children:"ðŸ‘¤"}),me=({className:s})=>e.jsx("span",{className:s,children:"ðŸ”"}),he=({className:s})=>e.jsx("span",{className:s,children:"ðŸ“„"}),pe=()=>{const[s,n]=y.useState(""),[c,j]=y.useState(null),u=[{id:"P001",name:"John Smith",age:45,gender:"Male",room:"A101",admissionDate:"2024-01-10",allergies:["Penicillin","Shellfish"],currentMedications:[{name:"Lisinopril",dosage:"10mg",frequency:"Once daily",prescribedBy:"Dr. Wilson"},{name:"Metformin",dosage:"500mg",frequency:"Twice daily",prescribedBy:"Dr. Wilson"}],medicalHistory:["Hypertension","Type 2 Diabetes","Previous MI (2020)"]},{id:"P002",name:"Sarah Johnson",age:32,gender:"Female",room:"A103",admissionDate:"2024-01-12",allergies:["Latex"],currentMedications:[{name:"Amoxicillin",dosage:"500mg",frequency:"Three times daily",prescribedBy:"Dr. Chen"}],medicalHistory:["Pneumonia","Asthma"]}].filter(t=>t.name.toLowerCase().includes(s.toLowerCase())||t.id.toLowerCase().includes(s.toLowerCase()));return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Patient Records"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{placeholder:"Search patients...",value:s,onChange:t=>n(t.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent"})]}),e.jsx("div",{className:"space-y-2",children:u.map(t=>e.jsx("div",{onClick:()=>j(t),className:`p-3 rounded-lg cursor-pointer transition-colors ${(c==null?void 0:c.id)===t.id?"bg-pharmacist-50 border border-pharmacist-200":"hover:bg-gray-50 border border-transparent"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"w-8 h-8 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",t.id," â€¢ Room ",t.room]})]})]})},t.id))})]})}),e.jsx("div",{className:"lg:col-span-2",children:c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:c.name}),e.jsxs("p",{className:"text-gray-600",children:["Patient ID: ",c.id]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"Active"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Age"}),e.jsx("p",{className:"font-medium",children:c.age})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Gender"}),e.jsx("p",{className:"font-medium",children:c.gender})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Room"}),e.jsx("p",{className:"font-medium",children:c.room})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Admitted"}),e.jsx("p",{className:"font-medium",children:c.admissionDate})]})]})]}),e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Medications"}),e.jsx("div",{className:"space-y-3",children:c.currentMedications.map((t,d)=>e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.dosage," - ",t.frequency]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Prescribed by ",t.prescribedBy]})]}),e.jsx(p,{variant:"secondary",size:"sm",children:"View Details"})]})},d))})]}),e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Allergies"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.allergies.map((t,d)=>e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium",children:t},d))})]}),e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Medical History"}),e.jsx("div",{className:"space-y-2",children:c.medicalHistory.map((t,d)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-700",children:t})]},d))})]})]}):e.jsxs(h,{className:"p-12 text-center",children:[e.jsx(z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Patient"}),e.jsx("p",{className:"text-gray-500",children:"Choose a patient from the list to view their medication records and history."})]})})]})]})},je=({className:s})=>e.jsx("span",{className:s,children:"ðŸ“¦"}),M=({className:s})=>e.jsx("span",{className:s,children:"âš ï¸"}),ge=({className:s})=>e.jsx("span",{className:s,children:"âž•"}),ue=({className:s})=>e.jsx("span",{className:s,children:"ðŸ”"}),ye=()=>{const s=P(),{items:n,alerts:c}=k(r=>r.inventory),[j,g]=y.useState(""),[u,t]=y.useState("all"),[d,l]=y.useState(null),[x,N]=y.useState(0),o=["all",...Array.from(new Set(n.map(r=>r.category)))],i=n.filter(r=>{const S=r.name.toLowerCase().includes(j.toLowerCase()),D=u==="all"||r.category===u;return S&&D}),f=r=>r.currentStock<=5?{status:"critical",color:"text-red-600 bg-red-50"}:r.currentStock<=r.minStock?{status:"low",color:"text-yellow-600 bg-yellow-50"}:r.currentStock>=r.maxStock*.8?{status:"high",color:"text-blue-600 bg-blue-50"}:{status:"normal",color:"text-green-600 bg-green-50"},a=r=>{x>0&&(s(H({itemId:r,quantity:x})),s(T({type:"success",title:"Stock Updated",message:"Added ${restockQuantity} units to inventory",priority:"medium",category:"system"})),l(null),N(0))},v=c.filter(r=>r.severity==="critical").length,b=n.filter(r=>r.currentStock<=r.minStock).length,m=n.filter(r=>{if(!r.expiryDate)return!1;const S=new Date(r.expiryDate),D=new Date;return D.setDate(D.getDate()+30),S<=D}).length;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Inventory Management"}),e.jsxs(p,{variant:"primary",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Add New Item"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"w-8 h-8 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"})]})]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-8 h-8 text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:v}),e.jsx("p",{className:"text-sm text-gray-600",children:"Critical Alerts"})]})]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-8 h-8 text-yellow-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:b}),e.jsx("p",{className:"text-sm text-gray-600",children:"Low Stock"})]})]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-8 h-8 text-orange-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:m}),e.jsx("p",{className:"text-sm text-gray-600",children:"Expiring Soon"})]})]})})]}),c.length>0&&e.jsxs(h,{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Active Alerts"}),e.jsx("div",{className:"space-y-2",children:c.slice(0,3).map(r=>e.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center ${r.severity==="critical"?"bg-red-50 border border-red-200":r.severity==="high"?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:`w-4 h-4 mr-2 ${r.severity==="critical"?"text-red-500":r.severity==="high"?"text-yellow-500":"text-blue-500"}`}),e.jsx("span",{className:"text-sm",children:r.message})]}),e.jsx(p,{variant:"secondary",size:"sm",onClick:()=>s(V(r.id)),children:"Dismiss"})]},r.id))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{placeholder:"Search inventory...",value:j,onChange:r=>g(r.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent"})]}),e.jsx("select",{value:u,onChange:r=>t(r.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent",children:o.map(r=>e.jsx("option",{value:r,children:r==="all"?"All Categories":r},r))})]}),e.jsx(h,{className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expiry"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(r=>{const S=f(r);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Batch: ",r.batchNumber]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:r.category}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[r.currentStock," ",r.unit]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",r.minStock," | Max: ",r.maxStock]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.color}`,children:S.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:r.expiryDate||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex gap-2",children:e.jsx(p,{variant:"secondary",size:"sm",onClick:()=>l(r.id),children:"Restock"})})})]},r.id)})})]})})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Restock Item"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{label:"Quantity to Add",type:"number",value:x,onChange:r=>N(parseInt(r.target.value)||0),min:"1"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{variant:"secondary",onClick:()=>l(null),className:"flex-1",children:"Cancel"}),e.jsx(p,{variant:"primary",onClick:()=>a(d),className:"flex-1",children:"Add Stock"})]})]})]})})})]})};function Ne(){const{items:s}=k(i=>i.inventory),[n,c]=y.useState(""),[j,g]=y.useState("all"),[u,t]=y.useState("all"),d=i=>{const f=R(new Date(i),new Date);return f<0?"expired":f<=30?"critical":f<=90?"warning":f<=180?"attention":"good"},l=s.filter(i=>{var m;if(!i.expiryDate)return!1;const f=i.name.toLowerCase().includes(n.toLowerCase())||((m=i.batchNumber)==null?void 0:m.toLowerCase().includes(n.toLowerCase())),a=j==="all"||i.category===j,v=d(i.expiryDate);return f&&a&&(u==="all"||v===u)}).sort((i,f)=>{const a=R(new Date(i.expiryDate),new Date),v=R(new Date(f.expiryDate),new Date);return a-v}),x={expired:s.filter(i=>i.expiryDate&&d(i.expiryDate)==="expired").length,critical:s.filter(i=>i.expiryDate&&d(i.expiryDate)==="critical").length,warning:s.filter(i=>i.expiryDate&&d(i.expiryDate)==="warning").length,attention:s.filter(i=>i.expiryDate&&d(i.expiryDate)==="attention").length},N=[...new Set(s.map(i=>i.category))],o=()=>{alert("Export expiry report - integrate with backend")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Medication Expiry Alerts"}),e.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Monitor and manage expiring medications"})]}),e.jsxs(p,{onClick:o,className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“Š"}),"Export Report"]})]}),(x.expired>0||x.critical>0)&&e.jsx("div",{className:"bg-error-50 border border-error-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸš¨"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-error-900",children:"Urgent Action Required"}),e.jsxs("p",{className:"text-sm text-error-700 mt-1",children:[x.expired>0&&`${x.expired} expired medication${x.expired>1?"s":""}`,x.expired>0&&x.critical>0&&" and ",x.critical>0&&`${x.critical} expiring within 30 days`]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Expired"}),e.jsx("p",{className:"text-3xl font-semibold text-error",children:x.expired})]}),e.jsx("div",{className:"w-12 h-12 bg-error-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"â›”"})})]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Critical (â‰¤30d)"}),e.jsx("p",{className:"text-3xl font-semibold text-error-600",children:x.critical})]}),e.jsx("div",{className:"w-12 h-12 bg-error-50 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"ðŸš¨"})})]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Warning (â‰¤90d)"}),e.jsx("p",{className:"text-3xl font-semibold text-warning",children:x.warning})]}),e.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"âš ï¸"})})]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Attention (â‰¤180d)"}),e.jsx("p",{className:"text-3xl font-semibold text-yellow-600",children:x.attention})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"â°"})})]})})]}),e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx(C,{placeholder:"Search by medication or batch...",value:n,onChange:i=>c(i.target.value),className:"flex-1"}),e.jsxs("select",{value:j,onChange:i=>g(i.target.value),className:"px-3 py-2 border border-neutral-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),N.map(i=>e.jsx("option",{value:i,children:i},i))]}),e.jsxs("select",{value:u,onChange:i=>t(i.target.value),className:"px-3 py-2 border border-neutral-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"critical",children:"Critical (â‰¤30d)"}),e.jsx("option",{value:"warning",children:"Warning (â‰¤90d)"}),e.jsx("option",{value:"attention",children:"Attention (â‰¤180d)"})]})]}),l.length===0?e.jsx(X,{icon:"âœ…",title:"No expiry alerts",description:n||j!=="all"||u!=="all"?"Try adjusting your filters":"All medications are within safe expiry dates"}):e.jsx("div",{className:"space-y-3",children:l.map(i=>{const f=R(new Date(i.expiryDate),new Date),a=f<0;return e.jsxs("div",{className:`p-4 border-2 rounded-lg transition-all ${a?"border-error-300 bg-error-50":f<=30?"border-error-200 bg-error-50":f<=90?"border-warning-200 bg-warning-50":"border-neutral-200 bg-white"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-base font-semibold text-neutral-900",children:i.name}),e.jsx(I,{severity:d(i.expiryDate),showIcon:!0,children:a?"Expired":`${f}d left`})]}),e.jsxs("p",{className:"text-sm text-neutral-600",children:["Batch: ",i.batchNumber," â€¢ Category: ",i.category]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Expiry Date"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:se(new Date(i.expiryDate),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Current Stock"}),e.jsxs("p",{className:"text-sm font-medium text-neutral-900",children:[i.currentStock," ",i.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Supplier"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:i.supplier})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Value at Risk"}),e.jsxs("p",{className:"text-sm font-medium text-neutral-900",children:["$",(i.currentStock*i.costPerUnit).toFixed(2)]})]})]}),e.jsx("div",{className:"flex gap-2 pt-3 border-t border-neutral-200",children:a?e.jsxs(e.Fragment,{children:[e.jsx(p,{size:"sm",className:"bg-error hover:bg-error-600",children:"Mark for Disposal"}),e.jsx(p,{variant:"secondary",size:"sm",children:"View Details"})]}):f<=90?e.jsxs(e.Fragment,{children:[e.jsx(p,{size:"sm",children:"Return to Supplier"}),e.jsx(p,{variant:"secondary",size:"sm",children:"Discount Sale"}),e.jsx(p,{variant:"secondary",size:"sm",children:"View Details"})]}):e.jsx(p,{variant:"secondary",size:"sm",children:"View Details"})})]},i.id)})})]})]})}function fe(){const{items:s,purchaseOrders:n,suppliers:c}=k(o=>o.reorder),j=P(),[g,u]=y.useState(!1),[t,d]=y.useState(null),l=s.filter(o=>o.status==="critical").length,x=s.filter(o=>o.status==="low").length,N=()=>{t&&(j(W({id:`PO${Date.now()}`,supplier:t.supplier,items:[{medication:t.medication,qty:t.reorderQty}],total:t.reorderQty*5,status:"pending",date:new Date().toISOString().split("T")[0]})),u(!1),d(null))};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Stock Reorder Management"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:l}),e.jsx("div",{className:"text-sm text-gray-600",children:"Critical Stock"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:x}),e.jsx("div",{className:"text-sm text-gray-600",children:"Low Stock"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:n.filter(o=>o.status==="pending").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending POs"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:s.filter(o=>o.status==="ok").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Adequate Stock"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Reorder Alerts"}),e.jsx("div",{className:"space-y-3",children:s.filter(o=>o.status!=="ok").map(o=>e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:o.medication}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${o.status==="critical"?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"}`,children:o.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Current: ",o.currentStock," | Reorder Point: ",o.reorderPoint]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Supplier: ",o.supplier]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Last Ordered: ",o.lastOrdered]})]}),e.jsx(p,{size:"sm",onClick:()=>{d(o),u(!0)},children:"Create PO"})]})},o.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recent Purchase Orders"}),e.jsx("div",{className:"space-y-3",children:n.slice(0,10).map(o=>e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:o.id}),e.jsx("p",{className:"text-sm text-gray-600",children:o.supplier}),e.jsx("p",{className:"text-sm text-gray-700",children:o.items.map(i=>`${i.medication} (${i.qty})`).join(", ")}),e.jsxs("p",{className:"text-sm text-gray-500",children:["$",o.total," â€¢ ",o.date]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${o.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:o.status})]})},o.id))})]})]}),e.jsx(A,{isOpen:g,onClose:()=>u(!1),title:"Create Purchase Order",children:t&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Medication"}),e.jsx("p",{className:"font-semibold",children:t.medication})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Supplier"}),e.jsx("p",{className:"font-semibold",children:t.supplier})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Quantity"}),e.jsxs("p",{className:"font-semibold",children:[t.reorderQty," units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Estimated Total"}),e.jsxs("p",{className:"font-semibold",children:["$",t.reorderQty*5]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(p,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(p,{onClick:N,children:"Create PO"})]})]})})]})}function ve(){const{batches:s,recalls:n}=k(m=>m.batch),c=P(),[j,g]=y.useState(!1),[u,t]=y.useState(!1),[d,l]=y.useState(null),[x,N]=y.useState({medication:"",lotNumber:"",mfgDate:"",expiry:"",qty:""}),[o,i]=y.useState(""),f=s.filter(m=>m.status==="active").length,a=s.filter(m=>m.status==="recalled").length,v=()=>{c(J({...x,id:`B${Date.now()}`,status:"active",qty:parseInt(x.qty)})),g(!1),N({medication:"",lotNumber:"",mfgDate:"",expiry:"",qty:""})},b=()=>{d&&(c(K({id:`R${Date.now()}`,batchId:d.id,reason:o,date:new Date().toISOString().split("T")[0],affectedQty:d.qty})),t(!1),l(null),i(""))};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Batch/Lot Tracking"}),e.jsx(p,{onClick:()=>g(!0),children:"+ Add Batch"})]}),n.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-red-800 mb-2",children:["âš ï¸ Active Recalls (",n.length,")"]}),n.slice(0,3).map(m=>{const r=s.find(S=>S.id===m.batchId);return e.jsxs("p",{className:"text-sm text-red-700",children:[r==null?void 0:r.medication," - Lot ",r==null?void 0:r.lotNumber,": ",m.reason]},m.id)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:f}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Batches"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:a}),e.jsx("div",{className:"text-sm text-gray-600",children:"Recalled Batches"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:s.reduce((m,r)=>m+r.qty,0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Units"})]})]}),e.jsx("div",{className:"space-y-3",children:s.map(m=>e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:m.medication}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm font-mono",children:m.lotNumber}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${m.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Mfg: ",m.mfgDate," | Expiry: ",m.expiry," | Qty: ",m.qty," units"]})]}),m.status==="active"&&e.jsx(p,{variant:"outline",size:"sm",onClick:()=>{l(m),t(!0)},children:"Recall"})]})},m.id))}),e.jsx(A,{isOpen:j,onClose:()=>g(!1),title:"Add Batch",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{label:"Medication",value:x.medication,onChange:m=>N({...x,medication:m.target.value})}),e.jsx(C,{label:"Lot Number",value:x.lotNumber,onChange:m=>N({...x,lotNumber:m.target.value})}),e.jsx(C,{label:"Manufacturing Date",type:"date",value:x.mfgDate,onChange:m=>N({...x,mfgDate:m.target.value})}),e.jsx(C,{label:"Expiry Date",type:"date",value:x.expiry,onChange:m=>N({...x,expiry:m.target.value})}),e.jsx(C,{label:"Quantity",type:"number",value:x.qty,onChange:m=>N({...x,qty:m.target.value})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(p,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(p,{onClick:v,children:"Add Batch"})]})]})}),e.jsx(A,{isOpen:u,onClose:()=>t(!1),title:"Recall Batch",children:d&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:e.jsxs("p",{className:"text-sm text-red-800",children:["âš ï¸ This will recall batch ",d.lotNumber," (",d.qty," units)"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Recall Reason"}),e.jsx("textarea",{value:o,onChange:m=>i(m.target.value),className:"w-full border rounded p-2",rows:3})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(p,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(p,{onClick:b,children:"Confirm Recall"})]})]})})]})}function be(){const{metrics:s,topMovers:n}=k(c=>c.inventoryAnalytics);return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Inventory Analytics"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[s.turnoverRate,"x"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Turnover Rate"})]}),e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-red-600",children:["$",(s.expiryWaste/1e3).toFixed(1),"K"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Expiry Waste"})]}),e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["$",(s.stockValue/1e3).toFixed(0),"K"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Stock Value"})]}),e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[s.reorderOptimization,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Reorder Efficiency"})]})]}),e.jsxs(h,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top Moving Items"}),e.jsx("div",{className:"space-y-3",children:n.map((c,j)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold",children:j+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:c.item}),e.jsxs("div",{className:"text-sm text-gray-600",children:[c.units," units sold"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["$",(c.value/1e3).toFixed(1),"K"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Revenue"})]})]},c.item))})]})]})}function Me(){return e.jsxs(G,{children:[e.jsx(w,{index:!0,element:e.jsx(te,{})}),e.jsx(w,{path:"prescriptions",element:e.jsx(ie,{})}),e.jsx(w,{path:"medication-requests",element:e.jsx(oe,{})}),e.jsx(w,{path:"patients",element:e.jsx(pe,{})}),e.jsx(w,{path:"inventory",element:e.jsx(ye,{})}),e.jsx(w,{path:"expiry-alerts",element:e.jsx(Ne,{})}),e.jsx(w,{path:"reorder-management",element:e.jsx(fe,{})}),e.jsx(w,{path:"batch-tracking",element:e.jsx(ve,{})}),e.jsx(w,{path:"inventory-analytics",element:e.jsx(be,{})})]})}export{Me as default};
