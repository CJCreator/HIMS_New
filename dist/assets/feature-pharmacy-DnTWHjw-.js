import{j as e,c as V,u as M,r as y,i as O}from"./vendor-react-DtsOz5pv.js";import{c as R,a as m,b as D,C as u,N as G,I as S,u as W,d as L,f as Q,g as Z,h as J,E as K}from"./components-shared-yLUaqag5.js";import{t as E}from"./vendor-other-DG8If0Tp.js";import{f as z,d as B}from"./vendor-utils-DvtxXjqu.js";import{c as U}from"./vendor-redux-CxpqfPS-.js";const X={items:[{id:"MED001",name:"Paracetamol 500mg",category:"Pain Relief",currentStock:5,minStock:20,maxStock:200,unit:"tablets",expiryDate:"2024-12-31",batchNumber:"PAR2024001",supplier:"PharmaCorp",costPerUnit:.15,lastRestocked:"2024-01-01"},{id:"MED002",name:"Amoxicillin 250mg",category:"Antibiotics",currentStock:15,minStock:25,maxStock:150,unit:"capsules",expiryDate:"2024-06-30",batchNumber:"AMX2024002",supplier:"MediSupply",costPerUnit:.45,lastRestocked:"2024-01-05"},{id:"MED003",name:"Insulin Glargine",category:"Diabetes",currentStock:8,minStock:10,maxStock:50,unit:"vials",expiryDate:"2024-03-15",batchNumber:"INS2024003",supplier:"DiabetesCare",costPerUnit:25,lastRestocked:"2024-01-10"},{id:"MED004",name:"Ibuprofen 400mg",category:"Pain Relief",currentStock:150,minStock:30,maxStock:300,unit:"tablets",expiryDate:"2025-08-20",batchNumber:"IBU2024004",supplier:"PharmaCorp",costPerUnit:.2,lastRestocked:"2024-01-12"},{id:"MED005",name:"Atorvastatin 20mg",category:"Cardiovascular",currentStock:80,minStock:40,maxStock:200,unit:"tablets",expiryDate:"2025-11-30",batchNumber:"ATO2024005",supplier:"CardioMed",costPerUnit:.75,lastRestocked:"2024-01-08"},{id:"MED006",name:"Metformin 500mg",category:"Diabetes",currentStock:120,minStock:50,maxStock:250,unit:"tablets",expiryDate:"2025-05-15",batchNumber:"MET2024006",supplier:"DiabetesCare",costPerUnit:.3,lastRestocked:"2024-01-11"},{id:"MED007",name:"Omeprazole 20mg",category:"Gastrointestinal",currentStock:18,minStock:25,maxStock:150,unit:"capsules",expiryDate:"2024-09-30",batchNumber:"OME2024007",supplier:"GastroSupply",costPerUnit:.4,lastRestocked:"2024-01-03"},{id:"MED008",name:"Aspirin 81mg",category:"Cardiovascular",currentStock:200,minStock:60,maxStock:400,unit:"tablets",expiryDate:"2026-01-31",batchNumber:"ASP2024008",supplier:"CardioMed",costPerUnit:.05,lastRestocked:"2024-01-14"},{id:"MED009",name:"Lisinopril 10mg",category:"Cardiovascular",currentStock:90,minStock:35,maxStock:180,unit:"tablets",expiryDate:"2025-07-20",batchNumber:"LIS2024009",supplier:"CardioMed",costPerUnit:.35,lastRestocked:"2024-01-09"},{id:"MED010",name:"Cetirizine 10mg",category:"Antihistamine",currentStock:3,minStock:20,maxStock:100,unit:"tablets",expiryDate:"2024-04-30",batchNumber:"CET2024010",supplier:"AllergyMed",costPerUnit:.25,lastRestocked:"2023-12-20"},{id:"MED011",name:"Morphine 10mg",category:"Pain Relief",currentStock:25,minStock:15,maxStock:60,unit:"vials",expiryDate:"2024-10-15",batchNumber:"MOR2024011",supplier:"PainCare",costPerUnit:15,lastRestocked:"2024-01-13"},{id:"MED012",name:"Prednisone 10mg",category:"Corticosteroids",currentStock:60,minStock:30,maxStock:150,unit:"tablets",expiryDate:"2025-03-31",batchNumber:"PRE2024012",supplier:"SteroidSupply",costPerUnit:.5,lastRestocked:"2024-01-07"}],alerts:[{id:"ALT001",itemId:"MED001",type:"low_stock",message:"Paracetamol 500mg is critically low (5 units remaining)",severity:"critical",createdAt:"2024-01-15T10:00:00Z"},{id:"ALT002",itemId:"MED003",type:"expiring_soon",message:"Insulin Glargine expires in 2 months",severity:"medium",createdAt:"2024-01-15T11:00:00Z"},{id:"ALT003",itemId:"MED010",type:"low_stock",message:"Cetirizine 10mg is critically low (3 units remaining)",severity:"critical",createdAt:"2024-01-15T12:00:00Z"},{id:"ALT004",itemId:"MED010",type:"expiring_soon",message:"Cetirizine 10mg expires in 3 months",severity:"medium",createdAt:"2024-01-15T12:05:00Z"},{id:"ALT005",itemId:"MED002",type:"low_stock",message:"Amoxicillin 250mg is low (15 units remaining)",severity:"high",createdAt:"2024-01-15T13:00:00Z"},{id:"ALT006",itemId:"MED007",type:"low_stock",message:"Omeprazole 20mg is low (18 units remaining)",severity:"high",createdAt:"2024-01-15T14:00:00Z"}],loading:!1,error:null},F=U({name:"inventory",initialState:X,reducers:{updateStock:(s,r)=>{const{itemId:t,newStock:g}=r.payload,j=s.items.find(x=>x.id===t);j&&(j.currentStock=g,g<=j.minStock&&(s.alerts.some(i=>i.itemId===t&&i.type==="low_stock")||s.alerts.unshift({id:`ALT${Date.now()}`,itemId:t,type:"low_stock",message:`${j.name} is ${g<=5?"critically":""} low (${g} units remaining)`,severity:g<=5?"critical":"high",createdAt:new Date().toISOString()})))},triggerLowStockNotification:(s,r)=>{},addInventoryItem:(s,r)=>{const t={...r.payload,id:`MED${String(s.items.length+1).padStart(3,"0")}`};s.items.push(t)},dismissAlert:(s,r)=>{s.alerts=s.alerts.filter(t=>t.id!==r.payload)},restockItem:(s,r)=>{const{itemId:t,quantity:g}=r.payload,j=s.items.find(x=>x.id===t);j&&(j.currentStock+=g,j.lastRestocked=new Date().toISOString(),s.alerts=s.alerts.filter(x=>!(x.itemId===t&&x.type==="low_stock")))},setLoading:(s,r)=>{s.loading=r.payload},setError:(s,r)=>{s.error=r.payload}}}),{updateStock:pe,addInventoryItem:Y,dismissAlert:ee,restockItem:se,triggerLowStockNotification:ge,setLoading:je,setError:ye}=F.actions,Ne=F.reducer,H=U({name:"reorder",initialState:{items:[{id:"1",medication:"Amoxicillin 500mg",currentStock:45,reorderPoint:100,reorderQty:500,supplier:"MedSupply Co",status:"low",lastOrdered:"2024-01-15"},{id:"2",medication:"Ibuprofen 200mg",currentStock:15,reorderPoint:50,reorderQty:300,supplier:"PharmaDirect",status:"critical",lastOrdered:"2024-01-20"},{id:"3",medication:"Metformin 850mg",currentStock:120,reorderPoint:80,reorderQty:400,supplier:"MedSupply Co",status:"ok",lastOrdered:"2024-02-01"}],purchaseOrders:[{id:"PO001",supplier:"MedSupply Co",items:[{medication:"Amoxicillin 500mg",qty:500}],total:2500,status:"pending",date:"2024-02-10"}],suppliers:[{id:"S1",name:"MedSupply Co",contact:"555-1001",email:"orders@medsupply.com",rating:4.5},{id:"S2",name:"PharmaDirect",contact:"555-1002",email:"sales@pharmadirect.com",rating:4.2}]},reducers:{createPO:(s,r)=>{s.purchaseOrders.unshift(r.payload)},updateStock:(s,r)=>{const t=s.items.find(g=>g.id===r.payload.id);t&&(t.currentStock=r.payload.stock,t.status=r.payload.stock<t.reorderPoint?r.payload.stock<t.reorderPoint*.5?"critical":"low":"ok")}}}),{createPO:te,updateStock:fe}=H.actions,ve=H.reducer,_=U({name:"batch",initialState:{batches:[{id:"B001",medication:"Amoxicillin 500mg",lotNumber:"LOT2024A",mfgDate:"2023-12-01",expiry:"2025-12-01",qty:500,status:"active"},{id:"B002",medication:"Ibuprofen 200mg",lotNumber:"LOT2024B",mfgDate:"2024-01-15",expiry:"2026-01-15",qty:300,status:"active"},{id:"B003",medication:"Aspirin 100mg",lotNumber:"LOT2023C",mfgDate:"2023-10-01",expiry:"2024-03-01",qty:150,status:"recalled"}],recalls:[{id:"R001",batchId:"B003",reason:"Quality control issue",date:"2024-02-01",affectedQty:150}]},reducers:{addBatch:(s,r)=>{s.batches.unshift(r.payload)},recallBatch:(s,r)=>{const t=s.batches.find(g=>g.id===r.payload.batchId);t&&(t.status="recalled"),s.recalls.unshift(r.payload)}}}),{addBatch:ae,recallBatch:ie}=_.actions,be=_.reducer;function Se({isOpen:s,onClose:r,prescription:t}){const g=()=>{window.print()},j=x=>{switch(x){case"dispensed":return e.jsx(D,{status:"delivered",children:"Dispensed"});case"ready":return e.jsx(D,{status:"sent",children:"Ready"});case"processing":return e.jsx(D,{status:"pending",children:"Processing"});default:return e.jsx(D,{status:"request",children:"Pending"})}};return e.jsx(R,{isOpen:s,onClose:r,title:"Prescription Details",size:"lg",children:e.jsxs("div",{className:"space-y-6 print:p-8",children:[e.jsxs("div",{className:"flex justify-between items-start pb-4 border-b border-neutral-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-neutral-900 mb-1",children:["Prescription #",t.id]}),e.jsxs("p",{className:"text-sm text-neutral-600",children:["Date: ",z(new Date(t.prescriptionDate),"MMM dd, yyyy HH:mm")]})]}),e.jsx("div",{className:"print:hidden",children:j(t.status)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-neutral-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-900 mb-3",children:"Patient Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Name"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:t.patientName})]}),t.patientId&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Patient ID"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:t.patientId})]}),t.patientAge&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Age"}),e.jsxs("p",{className:"text-sm font-medium text-neutral-900",children:[t.patientAge," years"]})]}),t.patientGender&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Gender"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900 capitalize",children:t.patientGender})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-900 mb-3",children:"Prescriber Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Doctor"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:t.doctorName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Date Prescribed"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:z(new Date(t.prescriptionDate),"MMM dd, yyyy")})]})]})]})]}),t.diagnosis&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-900 mb-2",children:"Diagnosis"}),e.jsx("p",{className:"text-sm text-neutral-900",children:t.diagnosis})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-900 mb-3",children:"Medications"}),e.jsx("div",{className:"space-y-3",children:t.medications.map((x,i)=>e.jsxs("div",{className:"p-4 border-2 border-neutral-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-base font-semibold text-neutral-900",children:x.name}),e.jsxs("span",{className:"text-sm text-neutral-600",children:["Qty: ",x.quantity]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Dosage"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:x.dosage})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Frequency"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:x.frequency})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Duration"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:x.duration})]})]}),x.instructions&&e.jsxs("div",{className:"pt-2 border-t border-neutral-200",children:[e.jsx("p",{className:"text-xs text-neutral-600 mb-1",children:"Instructions"}),e.jsx("p",{className:"text-sm text-neutral-900 italic",children:x.instructions})]})]},i))})]}),t.notes&&e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-900 mb-2",children:"Clinical Notes"}),e.jsx("p",{className:"text-sm text-neutral-900",children:t.notes})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-900 mb-2",children:"E-Signature Status"}),t.eSigned?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"âœ…"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-success",children:"Electronically Signed"}),t.eSignedBy&&e.jsxs("p",{className:"text-xs text-neutral-600",children:["By ",t.eSignedBy," on ",t.eSignedAt&&z(new Date(t.eSignedAt),"MMM dd, yyyy HH:mm")]})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"â³"}),e.jsx("p",{className:"text-sm font-medium text-warning",children:"Pending E-Signature"})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-4 border-t border-neutral-200 print:hidden",children:[e.jsx(m,{variant:"secondary",onClick:r,children:"Close"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"secondary",onClick:g,children:"ðŸ–¨ï¸ Print"}),e.jsx(m,{variant:"primary",children:"ðŸ“§ Send to Patient"})]})]})]})})}function ke(){const s=V(),{prescriptions:r}=M(l=>l.prescriptions),{notifications:t}=M(l=>l.notifications),[g,j]=y.useState(null),x=y.useMemo(()=>({pending:r.filter(l=>l.status==="pending").length,processing:r.filter(l=>l.status==="processing").length,completed:r.filter(l=>l.status==="ready"||l.status==="dispensed").length,avgTime:12}),[r]),i=y.useMemo(()=>r.filter(l=>l.status==="pending"||l.status==="processing").slice(0,3),[r]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Pharmacy Dashboard"}),e.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Real-time prescription processing"})]}),e.jsx(m,{onClick:()=>s("/pharmacist/prescriptions"),children:"View Queue"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-warning",children:x.pending}),e.jsx("div",{className:"text-body text-neutral-600",children:"Pending"})]}),e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-info",children:x.processing}),e.jsx("div",{className:"text-body text-neutral-600",children:"Processing"})]}),e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-success",children:x.completed}),e.jsx("div",{className:"text-body text-neutral-600",children:"Completed Today"})]}),e.jsxs(u,{className:"p-4 bg-success/10",children:[e.jsxs("div",{className:"text-h2 text-success",children:[x.avgTime,"m"]}),e.jsx("div",{className:"text-body text-neutral-600",children:"Avg Processing"}),e.jsx("p",{className:"text-xs text-success",children:"â†“ 40% faster"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(u,{className:"lg:col-span-2 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-h3 text-neutral-900",children:"Live Prescription Queue"}),e.jsxs(D,{status:"error",children:[x.pending," New"]})]}),e.jsx("div",{className:"space-y-3",children:i.length===0?e.jsx("p",{className:"text-body-sm text-neutral-500 text-center py-8",children:"No pending prescriptions"}):i.map(l=>{var n;return e.jsxs("div",{className:`p-4 rounded-small border-l-4 ${l.priority==="high"?"border-error bg-error/5":"border-neutral-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-body font-medium",children:l.patientName}),l.priority==="high"&&e.jsx(D,{status:"error",children:"HIGH PRIORITY"})]}),e.jsxs("p",{className:"text-body-sm text-neutral-600",children:["Prescribed by ",l.doctorName," â€¢ ",((n=l.medications)==null?void 0:n.length)||0," medications"]})]}),e.jsx(D,{status:l.status==="pending"?"pending":"sent",children:l.status})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(m,{variant:"primary",size:"sm",onClick:()=>s("/pharmacist/prescriptions"),children:"Process Now"}),e.jsx(m,{variant:"secondary",size:"sm",onClick:()=>s("/pharmacist/prescriptions"),children:"View Details"})]})]},l.id)})})]}),e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-h4 text-neutral-900 mb-4",children:"Recent Notifications"}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.slice(0,5).map(l=>e.jsxs("div",{className:"p-3 bg-neutral-50 rounded-small cursor-pointer hover:bg-neutral-100",onClick:()=>j(l),children:[e.jsx("p",{className:"text-body-sm font-medium",children:l.title}),e.jsx("p",{className:"text-body-sm text-neutral-600",children:l.message})]},l.id))})]})]}),e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-h4 text-neutral-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsx(m,{variant:"secondary",className:"justify-start",onClick:()=>s("/pharmacist/prescriptions"),children:"ðŸ’Š Prescription Queue"}),e.jsx(m,{variant:"secondary",className:"justify-start",onClick:()=>s("/pharmacist/inventory"),children:"ðŸ“¦ Inventory"}),e.jsx(m,{variant:"secondary",className:"justify-start",onClick:()=>s("/pharmacist/medication-requests"),children:"ðŸ“‹ Med Requests"}),e.jsx(m,{variant:"secondary",className:"justify-start",onClick:()=>s("/pharmacist/expiry-alerts"),children:"âš ï¸ Expiry Alerts"})]})]}),g&&e.jsx(G,{notification:g,isOpen:!!g,onClose:()=>j(null)})]})}const we=()=>{var A,$;const s=O(),{prescriptions:r}=M(d=>d.prescriptions),[t,g]=y.useState(""),[j,x]=y.useState("all"),[i,l]=y.useState(null),[n,p]=y.useState(!1),[f,o]=y.useState(!1),[c,v]=y.useState(!1),b=y.useMemo(()=>r.filter(d=>{const w=d.patientName.toLowerCase().includes(t.toLowerCase())||d.id.toLowerCase().includes(t.toLowerCase()),P=j==="all"||d.status===j;return w&&P}),[r,t,j]),N=async(d,w)=>{const P=r.find(a=>a.id===d);if(P){v(!0);try{s(W({id:d,status:w})),s(L({type:"success",title:"Prescription Updated",message:`Prescription ${d} status changed to ${w}`,priority:"medium",category:"medication"})),w==="dispensed"&&s(Q({role:"receptionist",type:"info",title:"Prescription Dispensed",message:`${P.patientName} prescription ready for billing`,priority:"medium",category:"medication"})),E.success(`Prescription ${w}`)}finally{v(!1)}}},k=d=>{l(d),p(!0)},h=d=>{l(d),o(!0)},C=()=>{E.success("Prescription sent to printer"),s(L({type:"info",title:"Prescription Printed",message:`Prescription for ${i==null?void 0:i.patientName} printed`,priority:"low",category:"medication"})),o(!1)};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Prescription Queue"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(S,{placeholder:"Search prescriptions...",value:t,onChange:d=>g(d.target.value),className:"w-64"}),e.jsxs("select",{value:j,onChange:d=>x(d.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"dispensed",children:"Dispensed"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:b.length===0?e.jsx("div",{className:"col-span-full text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No prescriptions found"})}):b.map(d=>{var w,P;return e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:d.patientName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[d.patientId," â€¢ ",d.id]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{status:d.priority==="high"?"error":d.priority==="medium"?"pending":"delivered",children:d.priority}),e.jsx(D,{status:d.status==="pending"?"pending":d.status==="processing"?"sent":d.status==="ready"?"dispatched":"delivered",children:d.status})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Prescribed by"}),e.jsx("p",{className:"font-medium text-gray-900",children:d.doctorName})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Medications (",((w=d.medications)==null?void 0:w.length)||0,")"]}),e.jsxs("div",{className:"space-y-1",children:[(P=d.medications)==null?void 0:P.slice(0,2).map((a,I)=>e.jsxs("p",{className:"text-sm text-gray-900",children:[a.name," ",a.dosage," Ã— ",a.quantity]},I)),d.medications&&d.medications.length>2&&e.jsxs("p",{className:"text-sm text-gray-500",children:["+",d.medications.length-2," more"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Prescription Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:d.prescriptionDate||d.date})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"secondary",size:"sm",onClick:()=>k(d),className:"flex-1",children:"View"}),d.status==="pending"&&e.jsx(m,{variant:"primary",size:"sm",onClick:()=>N(d.id,"processing"),loading:c,children:"Start"}),d.status==="processing"&&e.jsx(m,{variant:"primary",size:"sm",onClick:()=>N(d.id,"ready"),loading:c,children:"Ready"}),d.status==="ready"&&e.jsxs(e.Fragment,{children:[e.jsx(m,{variant:"secondary",size:"sm",onClick:()=>h(d),children:"Print"}),e.jsx(m,{variant:"primary",size:"sm",onClick:()=>N(d.id,"dispensed"),loading:c,children:"Dispense"})]})]})]},d.id)})}),i&&e.jsx(R,{isOpen:n,onClose:()=>p(!1),title:"Prescription Details",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Patient"}),e.jsx("p",{className:"text-gray-900",children:i.patientName}),e.jsx("p",{className:"text-sm text-gray-500",children:i.patientId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Prescribed by"}),e.jsx("p",{className:"text-gray-900",children:i.doctorName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date"}),e.jsx("p",{className:"text-gray-900",children:i.prescriptionDate||i.date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Priority"}),e.jsx(D,{status:i.priority==="high"?"error":i.priority==="medium"?"pending":"delivered",children:i.priority})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Medications"}),e.jsx("div",{className:"space-y-4",children:(A=i.medications)==null?void 0:A.map((d,w)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:d.name}),e.jsx("span",{className:"text-sm text-gray-500",children:d.dosage})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Quantity:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:d.quantity})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Frequency:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:d.frequency})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Duration:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:d.duration})]})]}),d.instructions&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Instructions:"}),e.jsx("p",{className:"text-sm text-gray-900",children:d.instructions})]})]},w))})]}),i.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Notes"}),e.jsx("p",{className:"text-gray-900",children:i.notes})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(m,{variant:"secondary",onClick:()=>p(!1),children:"Close"}),e.jsx(m,{onClick:()=>h(i),children:"Print"})]})]})}),i&&e.jsx(R,{isOpen:f,onClose:()=>o(!1),title:"Print Prescription",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-body",children:["Print prescription for ",i.patientName,"?"]}),e.jsxs("div",{className:"p-4 bg-neutral-50 rounded-small",children:[e.jsxs("p",{className:"text-body-sm text-neutral-600",children:["Prescription ID: ",i.id]}),e.jsxs("p",{className:"text-body-sm text-neutral-600",children:["Medications: ",(($=i.medications)==null?void 0:$.length)||0]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(m,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),e.jsx(m,{onClick:C,children:"Print"})]})]})})]})},re=({className:s})=>e.jsx("span",{className:s,children:"ðŸ”"}),le=({className:s})=>e.jsx("span",{className:s,children:"ðŸ“¦"}),ne=({className:s})=>e.jsx("span",{className:s,children:"ðŸš›"}),Ce=()=>{const s=O(),{requests:r}=M(n=>n.medication),[t,g]=y.useState(""),[j,x]=y.useState("all"),i=r.filter(n=>{const p=n.patientName.toLowerCase().includes(t.toLowerCase())||n.id.toLowerCase().includes(t.toLowerCase()),f=j==="all"||n.status===j;return p&&f}),l=(n,p)=>{const f=r.find(o=>o.id===n);s(J({id:n,status:p,processedBy:"Pharmacist John"})),s(L({type:"success",title:"Medication Request Updated",message:`Request ${n} status changed to ${p}`,priority:"medium",category:"system"})),p==="dispatched"&&f&&s(Q({role:"nurse",type:"success",title:"Medication Dispatched",message:`${f.medication} for ${f.patientName} (Room ${f.roomNumber}) is on the way`,priority:"high",category:"medication"}))};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Medication Requests from Nurses"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{placeholder:"Search requests...",value:t,onChange:n=>g(n.target.value),className:"pl-10 w-64 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent"})]}),e.jsxs("select",{value:j,onChange:n=>x(n.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"request",children:"New Requests"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"dispatched",children:"Dispatched"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:i.map(n=>e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:n.patientName}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Room ",n.roomNumber," â€¢ ",n.patientId]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Requested by ",n.requestedBy]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${n.urgency==="high"?"bg-red-100 text-red-800":n.urgency==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:n.urgency})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:n.medication}),e.jsxs("p",{className:"text-sm text-gray-500",children:[n.dosage," Ã— ",n.quantity," tablets"]})]}),n.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Notes:"}),e.jsx("p",{className:"text-sm text-gray-900",children:n.notes})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(Z,{status:n.status,className:"mb-2"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Requested: ",n.requestTime,n.processedTime&&` â€¢ Processed: ${n.processedTime}`]})]}),e.jsxs("div",{className:"flex gap-2",children:[n.status==="request"&&e.jsx(m,{variant:"primary",size:"sm",onClick:()=>l(n.id,"pending"),className:"flex-1",children:"Accept Request"}),n.status==="pending"&&e.jsxs(m,{variant:"primary",size:"sm",onClick:()=>l(n.id,"sent"),className:"flex-1",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Prepare & Send"]}),n.status==="sent"&&e.jsxs(m,{variant:"primary",size:"sm",onClick:()=>l(n.id,"dispatched"),className:"flex-1",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Mark Dispatched"]}),(n.status==="dispatched"||n.status==="received"||n.status==="delivered")&&e.jsxs("div",{className:"flex-1 text-center py-2 text-sm text-gray-500",children:[n.status==="dispatched"&&"Waiting for nurse confirmation",n.status==="received"&&"Received by nurse",n.status==="delivered"&&"Delivered to patient"]})]})]},n.id))}),i.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No medication requests found"})})]})},q=({className:s})=>e.jsx("span",{className:s,children:"ðŸ‘¤"}),ce=({className:s})=>e.jsx("span",{className:s,children:"ðŸ”"}),de=({className:s})=>e.jsx("span",{className:s,children:"ðŸ“„"}),De=()=>{const[s,r]=y.useState(""),[t,g]=y.useState(null),x=[{id:"P001",name:"John Smith",age:45,gender:"Male",room:"A101",admissionDate:"2024-01-10",allergies:["Penicillin","Shellfish"],currentMedications:[{name:"Lisinopril",dosage:"10mg",frequency:"Once daily",prescribedBy:"Dr. Wilson"},{name:"Metformin",dosage:"500mg",frequency:"Twice daily",prescribedBy:"Dr. Wilson"}],medicalHistory:["Hypertension","Type 2 Diabetes","Previous MI (2020)"]},{id:"P002",name:"Sarah Johnson",age:32,gender:"Female",room:"A103",admissionDate:"2024-01-12",allergies:["Latex"],currentMedications:[{name:"Amoxicillin",dosage:"500mg",frequency:"Three times daily",prescribedBy:"Dr. Chen"}],medicalHistory:["Pneumonia","Asthma"]}].filter(i=>i.name.toLowerCase().includes(s.toLowerCase())||i.id.toLowerCase().includes(s.toLowerCase()));return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Patient Records"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{placeholder:"Search patients...",value:s,onChange:i=>r(i.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent"})]}),e.jsx("div",{className:"space-y-2",children:x.map(i=>e.jsx("div",{onClick:()=>g(i),className:`p-3 rounded-lg cursor-pointer transition-colors ${(t==null?void 0:t.id)===i.id?"bg-pharmacist-50 border border-pharmacist-200":"hover:bg-gray-50 border border-transparent"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-8 h-8 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",i.id," â€¢ Room ",i.room]})]})]})},i.id))})]})}),e.jsx("div",{className:"lg:col-span-2",children:t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t.name}),e.jsxs("p",{className:"text-gray-600",children:["Patient ID: ",t.id]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"Active"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Age"}),e.jsx("p",{className:"font-medium",children:t.age})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Gender"}),e.jsx("p",{className:"font-medium",children:t.gender})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Room"}),e.jsx("p",{className:"font-medium",children:t.room})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Admitted"}),e.jsx("p",{className:"font-medium",children:t.admissionDate})]})]})]}),e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Medications"}),e.jsx("div",{className:"space-y-3",children:t.currentMedications.map((i,l)=>e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[i.dosage," - ",i.frequency]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Prescribed by ",i.prescribedBy]})]}),e.jsx(m,{variant:"secondary",size:"sm",children:"View Details"})]})},l))})]}),e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Allergies"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.allergies.map((i,l)=>e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium",children:i},l))})]}),e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Medical History"}),e.jsx("div",{className:"space-y-2",children:t.medicalHistory.map((i,l)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-700",children:i})]},l))})]})]}):e.jsxs(u,{className:"p-12 text-center",children:[e.jsx(q,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Patient"}),e.jsx("p",{className:"text-gray-500",children:"Choose a patient from the list to view their medication records and history."})]})})]})]})},Pe=()=>{const s=O(),{items:r,alerts:t}=M(a=>a.inventory),[g,j]=y.useState(""),[x,i]=y.useState("all"),[l,n]=y.useState(null),[p,f]=y.useState(!1),[o,c]=y.useState(0),[v,b]=y.useState(!1),[N,k]=y.useState({name:"",category:"",currentStock:0,minStock:0,maxStock:0,unit:"tablets",batchNumber:"",expiryDate:"",supplier:"",costPerUnit:0,lastRestocked:new Date().toISOString()}),h=y.useMemo(()=>["all",...Array.from(new Set(r.map(a=>a.category)))],[r]),C=y.useMemo(()=>r.filter(a=>{const I=a.name.toLowerCase().includes(g.toLowerCase()),T=x==="all"||a.category===x;return I&&T}),[r,g,x]),A=y.useMemo(()=>({criticalAlerts:t.filter(a=>a.severity==="critical").length,lowStockItems:r.filter(a=>a.currentStock<=a.minStock).length,expiringItems:r.filter(a=>{if(!a.expiryDate)return!1;const I=new Date(a.expiryDate),T=new Date;return T.setDate(T.getDate()+30),I<=T}).length}),[r,t]),$=a=>a.currentStock<=5?{status:"critical",color:"text-red-600 bg-red-50"}:a.currentStock<=a.minStock?{status:"low",color:"text-yellow-600 bg-yellow-50"}:a.currentStock>=a.maxStock*.8?{status:"high",color:"text-blue-600 bg-blue-50"}:{status:"normal",color:"text-green-600 bg-green-50"},d=async()=>{if(!l||o<=0){E.error("Please enter valid quantity");return}b(!0);try{s(se({itemId:l,quantity:o})),s(L({type:"success",title:"Stock Updated",message:`Added ${o} units to inventory`,priority:"medium",category:"inventory"})),E.success("Stock updated successfully"),n(null),c(0)}finally{b(!1)}},w=async()=>{if(!N.name||!N.category||N.currentStock<0){E.error("Please fill all required fields");return}b(!0);try{s(Y(N)),s(L({type:"success",title:"Item Added",message:`${N.name} added to inventory`,priority:"medium",category:"inventory"})),E.success("Item added successfully"),f(!1),k({name:"",category:"",currentStock:0,minStock:0,maxStock:0,unit:"tablets",batchNumber:"",expiryDate:"",supplier:"",costPerUnit:0,lastRestocked:new Date().toISOString()})}finally{b(!1)}},P=a=>{s(ee(a)),E.success("Alert dismissed")};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Inventory Management"}),e.jsx(m,{variant:"primary",onClick:()=>f(!0),children:"+ Add New Item"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-blue-600",children:r.length}),e.jsx("div",{className:"text-body text-neutral-600",children:"Total Items"})]}),e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-red-600",children:A.criticalAlerts}),e.jsx("div",{className:"text-body text-neutral-600",children:"Critical Alerts"})]}),e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-yellow-600",children:A.lowStockItems}),e.jsx("div",{className:"text-body text-neutral-600",children:"Low Stock"})]}),e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-orange-600",children:A.expiringItems}),e.jsx("div",{className:"text-body text-neutral-600",children:"Expiring Soon"})]})]}),t.length>0&&e.jsxs(u,{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Active Alerts"}),e.jsx("div",{className:"space-y-2",children:t.slice(0,3).map(a=>e.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center ${a.severity==="critical"?"bg-red-50 border border-red-200":a.severity==="high"?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"}`,children:[e.jsx("span",{className:"text-sm",children:a.message}),e.jsx(m,{variant:"secondary",size:"sm",onClick:()=>P(a.id),children:"Dismiss"})]},a.id))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(S,{placeholder:"Search inventory...",value:g,onChange:a=>j(a.target.value),className:"flex-1"}),e.jsx("select",{value:x,onChange:a=>i(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent",children:h.map(a=>e.jsx("option",{value:a,children:a==="all"?"All Categories":a},a))})]}),e.jsx(u,{className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expiry"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:C.map(a=>{const I=$(a);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Batch: ",a.batchNumber]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:a.category}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[a.currentStock," ",a.unit]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",a.minStock," | Max: ",a.maxStock]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I.color}`,children:I.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:a.expiryDate||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(m,{variant:"secondary",size:"sm",onClick:()=>n(a.id),children:"Restock"})})]},a.id)})})]})})}),e.jsx(R,{isOpen:!!l,onClose:()=>n(null),title:"Restock Item",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{label:"Quantity to Add *",type:"number",value:o,onChange:a=>c(parseInt(a.target.value)||0),min:"1"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(m,{variant:"secondary",onClick:()=>n(null),className:"flex-1",children:"Cancel"}),e.jsx(m,{variant:"primary",onClick:d,loading:v,className:"flex-1",children:"Add Stock"})]})]})}),e.jsx(R,{isOpen:p,onClose:()=>f(!1),title:"Add New Item",size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(S,{label:"Item Name *",value:N.name,onChange:a=>k({...N,name:a.target.value})}),e.jsx(S,{label:"Category *",value:N.category,onChange:a=>k({...N,category:a.target.value})}),e.jsx(S,{label:"Current Stock *",type:"number",value:N.currentStock,onChange:a=>k({...N,currentStock:parseInt(a.target.value)||0})}),e.jsx(S,{label:"Min Stock *",type:"number",value:N.minStock,onChange:a=>k({...N,minStock:parseInt(a.target.value)||0})}),e.jsx(S,{label:"Max Stock *",type:"number",value:N.maxStock,onChange:a=>k({...N,maxStock:parseInt(a.target.value)||0})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-body font-medium text-neutral-700 mb-1",children:"Unit *"}),e.jsxs("select",{value:N.unit,onChange:a=>k({...N,unit:a.target.value}),className:"block w-full px-3 py-2 border border-neutral-300 rounded-minimal text-body focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"tablets",children:"Tablets"}),e.jsx("option",{value:"capsules",children:"Capsules"}),e.jsx("option",{value:"bottles",children:"Bottles"}),e.jsx("option",{value:"boxes",children:"Boxes"}),e.jsx("option",{value:"units",children:"Units"})]})]}),e.jsx(S,{label:"Batch Number",value:N.batchNumber,onChange:a=>k({...N,batchNumber:a.target.value})}),e.jsx(S,{label:"Expiry Date",type:"date",value:N.expiryDate,onChange:a=>k({...N,expiryDate:a.target.value})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(m,{variant:"secondary",onClick:()=>f(!1),className:"flex-1",children:"Cancel"}),e.jsx(m,{variant:"primary",onClick:w,loading:v,className:"flex-1",children:"Add Item"})]})]})})]})};function Me(){const{items:s}=M(c=>c.inventory),[r,t]=y.useState(""),[g,j]=y.useState("all"),[x,i]=y.useState("all"),l=c=>{const v=B(new Date(c),new Date);return v<0?"expired":v<=30?"critical":v<=90?"warning":v<=180?"attention":"good"},n=s.filter(c=>{var h;if(!c.expiryDate)return!1;const v=c.name.toLowerCase().includes(r.toLowerCase())||((h=c.batchNumber)==null?void 0:h.toLowerCase().includes(r.toLowerCase())),b=g==="all"||c.category===g,N=l(c.expiryDate);return v&&b&&(x==="all"||N===x)}).sort((c,v)=>{const b=B(new Date(c.expiryDate),new Date),N=B(new Date(v.expiryDate),new Date);return b-N}),p={expired:s.filter(c=>c.expiryDate&&l(c.expiryDate)==="expired").length,critical:s.filter(c=>c.expiryDate&&l(c.expiryDate)==="critical").length,warning:s.filter(c=>c.expiryDate&&l(c.expiryDate)==="warning").length,attention:s.filter(c=>c.expiryDate&&l(c.expiryDate)==="attention").length},f=[...new Set(s.map(c=>c.category))],o=()=>{alert("Export expiry report - integrate with backend")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Medication Expiry Alerts"}),e.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Monitor and manage expiring medications"})]}),e.jsxs(m,{onClick:o,className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“Š"}),"Export Report"]})]}),(p.expired>0||p.critical>0)&&e.jsx("div",{className:"bg-error-50 border border-error-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸš¨"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-error-900",children:"Urgent Action Required"}),e.jsxs("p",{className:"text-sm text-error-700 mt-1",children:[p.expired>0&&`${p.expired} expired medication${p.expired>1?"s":""}`,p.expired>0&&p.critical>0&&" and ",p.critical>0&&`${p.critical} expiring within 30 days`]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Expired"}),e.jsx("p",{className:"text-3xl font-semibold text-error",children:p.expired})]}),e.jsx("div",{className:"w-12 h-12 bg-error-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"â›”"})})]})}),e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Critical (â‰¤30d)"}),e.jsx("p",{className:"text-3xl font-semibold text-error-600",children:p.critical})]}),e.jsx("div",{className:"w-12 h-12 bg-error-50 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"ðŸš¨"})})]})}),e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Warning (â‰¤90d)"}),e.jsx("p",{className:"text-3xl font-semibold text-warning",children:p.warning})]}),e.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"âš ï¸"})})]})}),e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Attention (â‰¤180d)"}),e.jsx("p",{className:"text-3xl font-semibold text-yellow-600",children:p.attention})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"â°"})})]})})]}),e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx(S,{placeholder:"Search by medication or batch...",value:r,onChange:c=>t(c.target.value),className:"flex-1"}),e.jsxs("select",{value:g,onChange:c=>j(c.target.value),className:"px-3 py-2 border border-neutral-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),f.map(c=>e.jsx("option",{value:c,children:c},c))]}),e.jsxs("select",{value:x,onChange:c=>i(c.target.value),className:"px-3 py-2 border border-neutral-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"critical",children:"Critical (â‰¤30d)"}),e.jsx("option",{value:"warning",children:"Warning (â‰¤90d)"}),e.jsx("option",{value:"attention",children:"Attention (â‰¤180d)"})]})]}),n.length===0?e.jsx(K,{icon:"âœ…",title:"No expiry alerts",description:r||g!=="all"||x!=="all"?"Try adjusting your filters":"All medications are within safe expiry dates"}):e.jsx("div",{className:"space-y-3",children:n.map(c=>{const v=B(new Date(c.expiryDate),new Date),b=v<0;return e.jsxs("div",{className:`p-4 border-2 rounded-lg transition-all ${b?"border-error-300 bg-error-50":v<=30?"border-error-200 bg-error-50":v<=90?"border-warning-200 bg-warning-50":"border-neutral-200 bg-white"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-base font-semibold text-neutral-900",children:c.name}),e.jsx(D,{severity:l(c.expiryDate),showIcon:!0,children:b?"Expired":`${v}d left`})]}),e.jsxs("p",{className:"text-sm text-neutral-600",children:["Batch: ",c.batchNumber," â€¢ Category: ",c.category]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Expiry Date"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:z(new Date(c.expiryDate),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Current Stock"}),e.jsxs("p",{className:"text-sm font-medium text-neutral-900",children:[c.currentStock," ",c.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Supplier"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:c.supplier})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Value at Risk"}),e.jsxs("p",{className:"text-sm font-medium text-neutral-900",children:["$",(c.currentStock*c.costPerUnit).toFixed(2)]})]})]}),e.jsx("div",{className:"flex gap-2 pt-3 border-t border-neutral-200",children:b?e.jsxs(e.Fragment,{children:[e.jsx(m,{size:"sm",className:"bg-error hover:bg-error-600",children:"Mark for Disposal"}),e.jsx(m,{variant:"secondary",size:"sm",children:"View Details"})]}):v<=90?e.jsxs(e.Fragment,{children:[e.jsx(m,{size:"sm",children:"Return to Supplier"}),e.jsx(m,{variant:"secondary",size:"sm",children:"Discount Sale"}),e.jsx(m,{variant:"secondary",size:"sm",children:"View Details"})]}):e.jsx(m,{variant:"secondary",size:"sm",children:"View Details"})})]},c.id)})})]})]})}function Ae(){const{items:s,purchaseOrders:r,suppliers:t}=M(o=>o.reorder),g=O(),[j,x]=y.useState(!1),[i,l]=y.useState(null),n=s.filter(o=>o.status==="critical").length,p=s.filter(o=>o.status==="low").length,f=()=>{i&&(g(te({id:`PO${Date.now()}`,supplier:i.supplier,items:[{medication:i.medication,qty:i.reorderQty}],total:i.reorderQty*5,status:"pending",date:new Date().toISOString().split("T")[0]})),x(!1),l(null))};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Stock Reorder Management"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:n}),e.jsx("div",{className:"text-sm text-gray-600",children:"Critical Stock"})]}),e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:p}),e.jsx("div",{className:"text-sm text-gray-600",children:"Low Stock"})]}),e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:r.filter(o=>o.status==="pending").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending POs"})]}),e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:s.filter(o=>o.status==="ok").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Adequate Stock"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Reorder Alerts"}),e.jsx("div",{className:"space-y-3",children:s.filter(o=>o.status!=="ok").map(o=>e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:o.medication}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${o.status==="critical"?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"}`,children:o.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Current: ",o.currentStock," | Reorder Point: ",o.reorderPoint]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Supplier: ",o.supplier]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Last Ordered: ",o.lastOrdered]})]}),e.jsx(m,{size:"sm",onClick:()=>{l(o),x(!0)},children:"Create PO"})]})},o.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recent Purchase Orders"}),e.jsx("div",{className:"space-y-3",children:r.slice(0,10).map(o=>e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:o.id}),e.jsx("p",{className:"text-sm text-gray-600",children:o.supplier}),e.jsx("p",{className:"text-sm text-gray-700",children:o.items.map(c=>`${c.medication} (${c.qty})`).join(", ")}),e.jsxs("p",{className:"text-sm text-gray-500",children:["$",o.total," â€¢ ",o.date]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${o.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:o.status})]})},o.id))})]})]}),e.jsx(R,{isOpen:j,onClose:()=>x(!1),title:"Create Purchase Order",children:i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Medication"}),e.jsx("p",{className:"font-semibold",children:i.medication})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Supplier"}),e.jsx("p",{className:"font-semibold",children:i.supplier})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Quantity"}),e.jsxs("p",{className:"font-semibold",children:[i.reorderQty," units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Estimated Total"}),e.jsxs("p",{className:"font-semibold",children:["$",i.reorderQty*5]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(m,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(m,{onClick:f,children:"Create PO"})]})]})})]})}function Ie(){const{batches:s,recalls:r}=M(h=>h.batch),t=O(),[g,j]=y.useState(!1),[x,i]=y.useState(!1),[l,n]=y.useState(null),[p,f]=y.useState({medication:"",lotNumber:"",mfgDate:"",expiry:"",qty:""}),[o,c]=y.useState(""),v=s.filter(h=>h.status==="active").length,b=s.filter(h=>h.status==="recalled").length,N=()=>{t(ae({...p,id:`B${Date.now()}`,status:"active",qty:parseInt(p.qty)})),j(!1),f({medication:"",lotNumber:"",mfgDate:"",expiry:"",qty:""})},k=()=>{l&&(t(ie({id:`R${Date.now()}`,batchId:l.id,reason:o,date:new Date().toISOString().split("T")[0],affectedQty:l.qty})),i(!1),n(null),c(""))};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Batch/Lot Tracking"}),e.jsx(m,{onClick:()=>j(!0),children:"+ Add Batch"})]}),r.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-red-800 mb-2",children:["âš ï¸ Active Recalls (",r.length,")"]}),r.slice(0,3).map(h=>{const C=s.find(A=>A.id===h.batchId);return e.jsxs("p",{className:"text-sm text-red-700",children:[C==null?void 0:C.medication," - Lot ",C==null?void 0:C.lotNumber,": ",h.reason]},h.id)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:v}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Batches"})]}),e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:b}),e.jsx("div",{className:"text-sm text-gray-600",children:"Recalled Batches"})]}),e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:s.reduce((h,C)=>h+C.qty,0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Units"})]})]}),e.jsx("div",{className:"space-y-3",children:s.map(h=>e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:h.medication}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm font-mono",children:h.lotNumber}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${h.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Mfg: ",h.mfgDate," | Expiry: ",h.expiry," | Qty: ",h.qty," units"]})]}),h.status==="active"&&e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{n(h),i(!0)},children:"Recall"})]})},h.id))}),e.jsx(R,{isOpen:g,onClose:()=>j(!1),title:"Add Batch",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{label:"Medication",value:p.medication,onChange:h=>f({...p,medication:h.target.value})}),e.jsx(S,{label:"Lot Number",value:p.lotNumber,onChange:h=>f({...p,lotNumber:h.target.value})}),e.jsx(S,{label:"Manufacturing Date",type:"date",value:p.mfgDate,onChange:h=>f({...p,mfgDate:h.target.value})}),e.jsx(S,{label:"Expiry Date",type:"date",value:p.expiry,onChange:h=>f({...p,expiry:h.target.value})}),e.jsx(S,{label:"Quantity",type:"number",value:p.qty,onChange:h=>f({...p,qty:h.target.value})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(m,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(m,{onClick:N,children:"Add Batch"})]})]})}),e.jsx(R,{isOpen:x,onClose:()=>i(!1),title:"Recall Batch",children:l&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:e.jsxs("p",{className:"text-sm text-red-800",children:["âš ï¸ This will recall batch ",l.lotNumber," (",l.qty," units)"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Recall Reason"}),e.jsx("textarea",{value:o,onChange:h=>c(h.target.value),className:"w-full border rounded p-2",rows:3})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(m,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(m,{onClick:k,children:"Confirm Recall"})]})]})})]})}function Re(){const{metrics:s,topMovers:r}=M(t=>t.inventoryAnalytics);return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Inventory Analytics"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[s.turnoverRate,"x"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Turnover Rate"})]}),e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-red-600",children:["$",(s.expiryWaste/1e3).toFixed(1),"K"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Expiry Waste"})]}),e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["$",(s.stockValue/1e3).toFixed(0),"K"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Stock Value"})]}),e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[s.reorderOptimization,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Reorder Efficiency"})]})]}),e.jsxs(u,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top Moving Items"}),e.jsx("div",{className:"space-y-3",children:r.map((t,g)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold",children:g+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:t.item}),e.jsxs("div",{className:"text-sm text-gray-600",children:[t.units," units sold"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["$",(t.value/1e3).toFixed(1),"K"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Revenue"})]})]},t.item))})]})]})}export{Ie as B,ke as E,Pe as I,Ce as M,we as P,Ae as R,De as a,be as b,Me as c,Re as d,Se as e,Ne as i,ve as r};
