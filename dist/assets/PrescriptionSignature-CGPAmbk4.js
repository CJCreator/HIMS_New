import{u as p,g as f,r as x,j as e}from"./vendor-react-DgLHP6bv.js";import{g as S,h as N}from"./index-Cdqg4OM2.js";import{C as g,a as v,c as b,X as P}from"./components-shared-xUUHivoC.js";import"./vendor-other-GA8idrW8.js";import"./vendor-redux-Bm7kM3lO.js";import"./feature-patient-CwIgoHzQ.js";import"./feature-laboratory-CrtyfW6q.js";import"./vendor-utils-BK7WLMRy.js";import"./vendor-charts-CR2zRRjt.js";import"./vendor-ui-B-dksMZM.js";import"./feature-pharmacy--tAhxErE.js";import"./feature-admin-Cc9aQ-62.js";import"./feature-analytics-C1J43PNm.js";function T(){const{signatures:w,signedPrescriptions:r}=p(s=>s.signature),{prescriptions:a}=p(s=>s.prescriptions),c=f(),[h,t]=x.useState(!1),[l,d]=x.useState(null),n=a.filter(s=>!r.find(i=>i.prescriptionId===s.id)),u=s=>{const i={id:Date.now().toString(),doctorId:"D001",doctorName:"Dr. Smith",signatureData:s,createdAt:new Date().toISOString()};c(S(i)),l&&c(N({id:Date.now().toString(),prescriptionId:l,signatureId:i.id})),t(!1),d(null)};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Electronic Prescription Signature"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["Unsigned Prescriptions (",n.length,")"]}),e.jsxs("div",{className:"space-y-3",children:[n.map(s=>e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.medication}),e.jsx("p",{className:"text-sm text-gray-600",children:s.patientName}),e.jsx("p",{className:"text-sm text-gray-500",children:s.date})]}),e.jsx(v,{size:"sm",onClick:()=>{d(s.id),t(!0)},children:"Sign"})]})},s.id)),n.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No unsigned prescriptions"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Signature Audit Trail"}),e.jsx("div",{className:"space-y-3",children:r.slice(0,10).map(s=>{var o,m;const i=a.find(j=>j.id===s.prescriptionId);return i?e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:((m=(o=i==null?void 0:i.medications)==null?void 0:o[0])==null?void 0:m.name)||"Medication"}),e.jsx("p",{className:"text-xs text-gray-600",children:new Date(s.signedAt).toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-500",children:["IP: ",s.ipAddress]})]})]})},s.id):null})})]})]}),e.jsx(b,{isOpen:h,onClose:()=>t(!1),title:"Sign Prescription",children:e.jsx(P,{onSave:u,onCancel:()=>t(!1)})})]})}export{T as default};
