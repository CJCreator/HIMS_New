import{d as O,m as Q,j as e,B as p,C as h,a as T,I as C,M as A,x as q,c as I,i as F,y as U,z as V,A as H,D as W,E as G,F as J}from"./index-Br-Gz1Ol.js";import{u as K,a as y,f as Y,h as w}from"./vendor-Co8sLtJy.js";import{S as _}from"./SmartNotificationSystem-BQ4FqXTp.js";import{d as R,u as k}from"./redux-29f41A6q.js";import{E as X}from"./EmptyState-DyZZWIsp.js";import{n as Z,d as ee,f as se}from"./format-DxorSBJt.js";import"./ui-Bub52LCX.js";function P(s,c,l){const[g,j]=Z(l==null?void 0:l.in,s,c),u=E(g,j),t=Math.abs(ee(g,j));g.setDate(g.getDate()-u*t);const d=+(E(g,j)===-u),i=u*(t-d);return i===0?0:i}function E(s,c){const l=s.getFullYear()-c.getFullYear()||s.getMonth()-c.getMonth()||s.getDate()-c.getDate()||s.getHours()-c.getHours()||s.getMinutes()-c.getMinutes()||s.getSeconds()-c.getSeconds()||s.getMilliseconds()-c.getMilliseconds();return l<0?-1:l>0?1:l}function te(){const s=K(),[c,l]=y.useState({pending:0,processing:0,completed:0,avgTime:12}),[g,j]=y.useState([]),{updateCount:u}=O();return y.useEffect(()=>{const t=Q.getPrescriptions();j(t.slice(0,3)),l({pending:t.filter(d=>d.status==="pending").length,processing:t.filter(d=>d.status==="processing").length,completed:t.filter(d=>d.status==="completed").length,avgTime:12})},[u]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Enhanced Pharmacy Dashboard"}),e.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Real-time prescription processing"})]}),e.jsx(p,{onClick:()=>s("/pharmacist/prescriptions"),children:"View Queue"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-warning",children:c.pending}),e.jsx("div",{className:"text-body text-neutral-600",children:"Pending"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-info",children:c.processing}),e.jsx("div",{className:"text-body text-neutral-600",children:"Processing"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-h2 text-success",children:c.completed}),e.jsx("div",{className:"text-body text-neutral-600",children:"Completed Today"})]}),e.jsxs(h,{className:"p-4 bg-success/10",children:[e.jsxs("div",{className:"text-h2 text-success",children:[c.avgTime,"m"]}),e.jsx("div",{className:"text-body text-neutral-600",children:"Avg Processing"}),e.jsx("p",{className:"text-xs text-success",children:"â†“ 40% faster"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(h,{className:"lg:col-span-2 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-h3 text-neutral-900",children:"Live Prescription Queue"}),e.jsxs(T,{status:"error",children:[c.pending," New"]})]}),e.jsx("div",{className:"space-y-3",children:g.map(t=>{var d;return e.jsxs("div",{className:`p-4 rounded-small border-l-4 ${t.priority==="high"?"border-error bg-error/5":"border-neutral-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-body font-medium",children:t.patientName}),t.priority==="high"&&e.jsx(T,{status:"error",children:"HIGH PRIORITY"})]}),e.jsxs("p",{className:"text-body-sm text-neutral-600",children:["Prescribed by ",t.doctor," â€¢ ",((d=t.medications)==null?void 0:d.length)||0," medications"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-body-sm text-neutral-600",children:[Math.floor((Date.now()-t.timestamp)/6e4)," min ago"]})})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(p,{variant:"primary",size:"sm",onClick:()=>s("/pharmacist/prescriptions"),children:"Process Now"}),e.jsx(p,{variant:"secondary",size:"sm",onClick:()=>s(`/pharmacist/prescriptions/${t.id}`),children:"View Details"})]})]},t.id)})})]}),e.jsx("div",{children:e.jsx(_,{})})]}),e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"text-h4 text-neutral-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsx(p,{variant:"secondary",className:"justify-start",onClick:()=>s("/pharmacist/prescriptions"),children:"ðŸ’Š Prescription Queue"}),e.jsx(p,{variant:"secondary",className:"justify-start",onClick:()=>s("/pharmacist/inventory"),children:"ðŸ“¦ Inventory"}),e.jsx(p,{variant:"secondary",className:"justify-start",onClick:()=>s("/pharmacist/medication-requests"),children:"ðŸ“‹ Med Requests"}),e.jsx(p,{variant:"secondary",className:"justify-start",onClick:()=>s("/pharmacist/expiry-alerts"),children:"âš ï¸ Expiry Alerts"})]})]})]})}const ae=({className:s})=>e.jsx("span",{className:s,children:"ðŸ”"}),re=({className:s})=>e.jsx("span",{className:s,children:"ðŸ‘ï¸"}),L=({className:s})=>e.jsx("span",{className:s,children:"âœ…"}),z=({className:s})=>e.jsx("span",{className:s,children:"ðŸ•"}),le=({className:s})=>e.jsx("span",{className:s,children:"âš ï¸"}),ie=()=>{const s=R(),{prescriptions:c}=k(a=>a.prescriptions),[l,g]=y.useState(""),[j,u]=y.useState("all"),[t,d]=y.useState(null),[i,x]=y.useState(!1),N=c.filter(a=>{const v=a.patientName.toLowerCase().includes(l.toLowerCase())||a.id.toLowerCase().includes(l.toLowerCase()),b=j==="all"||a.status===j;return v&&b}),o=a=>{switch(a){case"pending":return e.jsx(z,{className:"w-4 h-4"});case"processing":return e.jsx(le,{className:"w-4 h-4"});case"ready":return e.jsx(L,{className:"w-4 h-4"});case"dispensed":return e.jsx(L,{className:"w-4 h-4"});default:return e.jsx(z,{className:"w-4 h-4"})}},n=(a,v)=>{const b=c.find(m=>m.id===a);s(q({id:a,status:v})),s(I({type:"success",title:"Prescription Updated",message:`Prescription ${a} status changed to ${v}`,priority:"medium",category:"system"})),v==="dispensed"&&b&&s(F({role:"receptionist",type:"info",title:"Prescription Dispensed",message:`${b.patientName} prescription ready for billing`,priority:"medium",category:"medication"}))},f=a=>{d(a),x(!0)};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Prescription Queue"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(C,{placeholder:"Search prescriptions...",value:l,onChange:a=>g(a.target.value),className:"pl-10 w-64"})]}),e.jsxs("select",{value:j,onChange:a=>u(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"ready",children:"Ready"}),e.jsx("option",{value:"dispensed",children:"Dispensed"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:N.map(a=>e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.patientName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a.patientId," â€¢ ",a.id]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${a.priority==="high"?"bg-red-100 text-red-800":a.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:a.priority}),e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium flex items-center gap-1 ${a.status==="pending"?"bg-yellow-100 text-yellow-800":a.status==="processing"?"bg-blue-100 text-blue-800":a.status==="ready"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:[o(a.status),a.status]})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Prescribed by"}),e.jsx("p",{className:"font-medium text-gray-900",children:a.doctorName})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Medications (",a.medications.length,")"]}),e.jsxs("div",{className:"space-y-1",children:[a.medications.slice(0,2).map((v,b)=>e.jsxs("p",{className:"text-sm text-gray-900",children:[v.name," ",v.dosage," Ã— ",v.quantity]},b)),a.medications.length>2&&e.jsxs("p",{className:"text-sm text-gray-500",children:["+",a.medications.length-2," more"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Prescription Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.prescriptionDate})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{variant:"secondary",size:"sm",onClick:()=>f(a),className:"flex-1",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"View Details"]}),a.status==="pending"&&e.jsx(p,{variant:"primary",size:"sm",onClick:()=>n(a.id,"processing"),children:"Start Processing"}),a.status==="processing"&&e.jsx(p,{variant:"primary",size:"sm",onClick:()=>n(a.id,"ready"),children:"Mark Ready"}),a.status==="ready"&&e.jsx(p,{variant:"primary",size:"sm",onClick:()=>n(a.id,"dispensed"),children:"Dispense"})]})]},a.id))}),e.jsx(A,{isOpen:i,onClose:()=>x(!1),title:"Prescription Details",size:"lg",children:t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Patient"}),e.jsx("p",{className:"text-gray-900",children:t.patientName}),e.jsx("p",{className:"text-sm text-gray-500",children:t.patientId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Prescribed by"}),e.jsx("p",{className:"text-gray-900",children:t.doctorName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date"}),e.jsx("p",{className:"text-gray-900",children:t.prescriptionDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Priority"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.priority==="high"?"bg-red-100 text-red-800":t.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:t.priority})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Medications"}),e.jsx("div",{className:"space-y-4",children:t.medications.map((a,v)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.name}),e.jsx("span",{className:"text-sm text-gray-500",children:a.dosage})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Quantity:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:a.quantity})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Frequency:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:a.frequency})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Duration:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:a.duration})]})]}),a.instructions&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Instructions:"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.instructions})]})]},v))})]}),t.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Notes"}),e.jsx("p",{className:"text-gray-900",children:t.notes})]})]})})]})},$=[{key:"request",label:"Requested",icon:"ðŸ“"},{key:"pending",label:"Pending",icon:"â³"},{key:"sent",label:"Sent to Pharmacy",icon:"ðŸ“¤"},{key:"dispatched",label:"Dispatched",icon:"ðŸš›"},{key:"received",label:"Received",icon:"ðŸ“¦"},{key:"delivered",label:"Delivered",icon:"âœ…"}],ne=({status:s,className:c=""})=>{const l=$.findIndex(g=>g.key===s);return e.jsx("div",{className:`flex items-center space-x-2 ${c}`,children:$.map((g,j)=>{const u=j<=l,t=j===l;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`
              flex items-center justify-center w-8 h-8 rounded-full text-xs font-medium
              ${u?t?"bg-blue-500 text-white":"bg-green-500 text-white":"bg-gray-200 text-gray-500"}
            `,children:g.icon}),j<$.length-1&&e.jsx("div",{className:`
                w-8 h-0.5 mx-1
                ${j<l?"bg-green-500":"bg-gray-200"}
              `})]},g.key)})})},ce=({className:s})=>e.jsx("span",{className:s,children:"ðŸ”"}),de=({className:s})=>e.jsx("span",{className:s,children:"ðŸ“¦"}),xe=({className:s})=>e.jsx("span",{className:s,children:"ðŸš›"}),oe=()=>{const s=R(),{requests:c}=k(i=>i.medication),[l,g]=y.useState(""),[j,u]=y.useState("all"),t=c.filter(i=>{const x=i.patientName.toLowerCase().includes(l.toLowerCase())||i.id.toLowerCase().includes(l.toLowerCase()),N=j==="all"||i.status===j;return x&&N}),d=(i,x)=>{const N=c.find(o=>o.id===i);s(U({id:i,status:x,processedBy:"Pharmacist John"})),s(I({type:"success",title:"Medication Request Updated",message:`Request ${i} status changed to ${x}`,priority:"medium",category:"system"})),x==="dispatched"&&N&&s(F({role:"nurse",type:"success",title:"Medication Dispatched",message:`${N.medication} for ${N.patientName} (Room ${N.roomNumber}) is on the way`,priority:"high",category:"medication"}))};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Medication Requests from Nurses"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{placeholder:"Search requests...",value:l,onChange:i=>g(i.target.value),className:"pl-10 w-64 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent"})]}),e.jsxs("select",{value:j,onChange:i=>u(i.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"request",children:"New Requests"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"dispatched",children:"Dispatched"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(i=>e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:i.patientName}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Room ",i.roomNumber," â€¢ ",i.patientId]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Requested by ",i.requestedBy]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${i.urgency==="high"?"bg-red-100 text-red-800":i.urgency==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:i.urgency})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.medication}),e.jsxs("p",{className:"text-sm text-gray-500",children:[i.dosage," Ã— ",i.quantity," tablets"]})]}),i.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Notes:"}),e.jsx("p",{className:"text-sm text-gray-900",children:i.notes})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(ne,{status:i.status,className:"mb-2"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Requested: ",i.requestTime,i.processedTime&&` â€¢ Processed: ${i.processedTime}`]})]}),e.jsxs("div",{className:"flex gap-2",children:[i.status==="request"&&e.jsx(p,{variant:"primary",size:"sm",onClick:()=>d(i.id,"pending"),className:"flex-1",children:"Accept Request"}),i.status==="pending"&&e.jsxs(p,{variant:"primary",size:"sm",onClick:()=>d(i.id,"sent"),className:"flex-1",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Prepare & Send"]}),i.status==="sent"&&e.jsxs(p,{variant:"primary",size:"sm",onClick:()=>d(i.id,"dispatched"),className:"flex-1",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Mark Dispatched"]}),(i.status==="dispatched"||i.status==="received"||i.status==="delivered")&&e.jsxs("div",{className:"flex-1 text-center py-2 text-sm text-gray-500",children:[i.status==="dispatched"&&"Waiting for nurse confirmation",i.status==="received"&&"Received by nurse",i.status==="delivered"&&"Delivered to patient"]})]})]},i.id))}),t.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No medication requests found"})})]})},B=({className:s})=>e.jsx("span",{className:s,children:"ðŸ‘¤"}),me=({className:s})=>e.jsx("span",{className:s,children:"ðŸ”"}),he=({className:s})=>e.jsx("span",{className:s,children:"ðŸ“„"}),pe=()=>{const[s,c]=y.useState(""),[l,g]=y.useState(null),u=[{id:"P001",name:"John Smith",age:45,gender:"Male",room:"A101",admissionDate:"2024-01-10",allergies:["Penicillin","Shellfish"],currentMedications:[{name:"Lisinopril",dosage:"10mg",frequency:"Once daily",prescribedBy:"Dr. Wilson"},{name:"Metformin",dosage:"500mg",frequency:"Twice daily",prescribedBy:"Dr. Wilson"}],medicalHistory:["Hypertension","Type 2 Diabetes","Previous MI (2020)"]},{id:"P002",name:"Sarah Johnson",age:32,gender:"Female",room:"A103",admissionDate:"2024-01-12",allergies:["Latex"],currentMedications:[{name:"Amoxicillin",dosage:"500mg",frequency:"Three times daily",prescribedBy:"Dr. Chen"}],medicalHistory:["Pneumonia","Asthma"]}].filter(t=>t.name.toLowerCase().includes(s.toLowerCase())||t.id.toLowerCase().includes(s.toLowerCase()));return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Patient Records"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{placeholder:"Search patients...",value:s,onChange:t=>c(t.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent"})]}),e.jsx("div",{className:"space-y-2",children:u.map(t=>e.jsx("div",{onClick:()=>g(t),className:`p-3 rounded-lg cursor-pointer transition-colors ${(l==null?void 0:l.id)===t.id?"bg-pharmacist-50 border border-pharmacist-200":"hover:bg-gray-50 border border-transparent"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"w-8 h-8 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",t.id," â€¢ Room ",t.room]})]})]})},t.id))})]})}),e.jsx("div",{className:"lg:col-span-2",children:l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:l.name}),e.jsxs("p",{className:"text-gray-600",children:["Patient ID: ",l.id]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"Active"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Age"}),e.jsx("p",{className:"font-medium",children:l.age})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Gender"}),e.jsx("p",{className:"font-medium",children:l.gender})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Room"}),e.jsx("p",{className:"font-medium",children:l.room})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Admitted"}),e.jsx("p",{className:"font-medium",children:l.admissionDate})]})]})]}),e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Medications"}),e.jsx("div",{className:"space-y-3",children:l.currentMedications.map((t,d)=>e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.dosage," - ",t.frequency]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Prescribed by ",t.prescribedBy]})]}),e.jsx(p,{variant:"secondary",size:"sm",children:"View Details"})]})},d))})]}),e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Allergies"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.allergies.map((t,d)=>e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium",children:t},d))})]}),e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Medical History"}),e.jsx("div",{className:"space-y-2",children:l.medicalHistory.map((t,d)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-700",children:t})]},d))})]})]}):e.jsxs(h,{className:"p-12 text-center",children:[e.jsx(B,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Patient"}),e.jsx("p",{className:"text-gray-500",children:"Choose a patient from the list to view their medication records and history."})]})})]})]})},je=({className:s})=>e.jsx("span",{className:s,children:"ðŸ“¦"}),M=({className:s})=>e.jsx("span",{className:s,children:"âš ï¸"}),ge=({className:s})=>e.jsx("span",{className:s,children:"âž•"}),ue=({className:s})=>e.jsx("span",{className:s,children:"ðŸ”"}),ye=()=>{const s=R(),{items:c,alerts:l}=k(r=>r.inventory),[g,j]=y.useState(""),[u,t]=y.useState("all"),[d,i]=y.useState(null),[x,N]=y.useState(0),o=["all",...Array.from(new Set(c.map(r=>r.category)))],n=c.filter(r=>{const S=r.name.toLowerCase().includes(g.toLowerCase()),D=u==="all"||r.category===u;return S&&D}),f=r=>r.currentStock<=5?{status:"critical",color:"text-red-600 bg-red-50"}:r.currentStock<=r.minStock?{status:"low",color:"text-yellow-600 bg-yellow-50"}:r.currentStock>=r.maxStock*.8?{status:"high",color:"text-blue-600 bg-blue-50"}:{status:"normal",color:"text-green-600 bg-green-50"},a=r=>{x>0&&(s(H({itemId:r,quantity:x})),s(I({type:"success",title:"Stock Updated",message:"Added ${restockQuantity} units to inventory",priority:"medium",category:"system"})),i(null),N(0))},v=l.filter(r=>r.severity==="critical").length,b=c.filter(r=>r.currentStock<=r.minStock).length,m=c.filter(r=>{if(!r.expiryDate)return!1;const S=new Date(r.expiryDate),D=new Date;return D.setDate(D.getDate()+30),S<=D}).length;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Inventory Management"}),e.jsxs(p,{variant:"primary",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Add New Item"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"w-8 h-8 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"})]})]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-8 h-8 text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:v}),e.jsx("p",{className:"text-sm text-gray-600",children:"Critical Alerts"})]})]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-8 h-8 text-yellow-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:b}),e.jsx("p",{className:"text-sm text-gray-600",children:"Low Stock"})]})]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-8 h-8 text-orange-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:m}),e.jsx("p",{className:"text-sm text-gray-600",children:"Expiring Soon"})]})]})})]}),l.length>0&&e.jsxs(h,{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Active Alerts"}),e.jsx("div",{className:"space-y-2",children:l.slice(0,3).map(r=>e.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center ${r.severity==="critical"?"bg-red-50 border border-red-200":r.severity==="high"?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:`w-4 h-4 mr-2 ${r.severity==="critical"?"text-red-500":r.severity==="high"?"text-yellow-500":"text-blue-500"}`}),e.jsx("span",{className:"text-sm",children:r.message})]}),e.jsx(p,{variant:"secondary",size:"sm",onClick:()=>s(V(r.id)),children:"Dismiss"})]},r.id))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{placeholder:"Search inventory...",value:g,onChange:r=>j(r.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent"})]}),e.jsx("select",{value:u,onChange:r=>t(r.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pharmacist-500 focus:border-transparent",children:o.map(r=>e.jsx("option",{value:r,children:r==="all"?"All Categories":r},r))})]}),e.jsx(h,{className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expiry"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(r=>{const S=f(r);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Batch: ",r.batchNumber]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:r.category}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[r.currentStock," ",r.unit]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",r.minStock," | Max: ",r.maxStock]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.color}`,children:S.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:r.expiryDate||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex gap-2",children:e.jsx(p,{variant:"secondary",size:"sm",onClick:()=>i(r.id),children:"Restock"})})})]},r.id)})})]})})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Restock Item"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{label:"Quantity to Add",type:"number",value:x,onChange:r=>N(parseInt(r.target.value)||0),min:"1"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{variant:"secondary",onClick:()=>i(null),className:"flex-1",children:"Cancel"}),e.jsx(p,{variant:"primary",onClick:()=>a(d),className:"flex-1",children:"Add Stock"})]})]})]})})})]})};function Ne({expiryDate:s,size:c="md"}){const l=P(new Date(s),new Date),j=l<0?{label:"Expired",color:"bg-error text-error-900 border-error-300",icon:"â›”"}:l<=30?{label:`${l}d left`,color:"bg-error-50 text-error-700 border-error-200",icon:"ðŸš¨"}:l<=90?{label:`${l}d left`,color:"bg-warning-50 text-warning-700 border-warning-200",icon:"âš ï¸"}:l<=180?{label:`${Math.floor(l/30)}mo left`,color:"bg-yellow-50 text-yellow-700 border-yellow-200",icon:"â°"}:{label:"Good",color:"bg-success-50 text-success-700 border-success-200",icon:"âœ“"},u={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"};return e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border font-medium ${j.color} ${u[c]}`,children:[e.jsx("span",{children:j.icon}),e.jsx("span",{children:j.label})]})}function fe(){const{items:s}=k(n=>n.inventory),[c,l]=y.useState(""),[g,j]=y.useState("all"),[u,t]=y.useState("all"),d=n=>{const f=P(new Date(n),new Date);return f<0?"expired":f<=30?"critical":f<=90?"warning":f<=180?"attention":"good"},i=s.filter(n=>{var m;if(!n.expiryDate)return!1;const f=n.name.toLowerCase().includes(c.toLowerCase())||((m=n.batchNumber)==null?void 0:m.toLowerCase().includes(c.toLowerCase())),a=g==="all"||n.category===g,v=d(n.expiryDate);return f&&a&&(u==="all"||v===u)}).sort((n,f)=>{const a=P(new Date(n.expiryDate),new Date),v=P(new Date(f.expiryDate),new Date);return a-v}),x={expired:s.filter(n=>n.expiryDate&&d(n.expiryDate)==="expired").length,critical:s.filter(n=>n.expiryDate&&d(n.expiryDate)==="critical").length,warning:s.filter(n=>n.expiryDate&&d(n.expiryDate)==="warning").length,attention:s.filter(n=>n.expiryDate&&d(n.expiryDate)==="attention").length},N=[...new Set(s.map(n=>n.category))],o=()=>{alert("Export expiry report - integrate with backend")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Medication Expiry Alerts"}),e.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Monitor and manage expiring medications"})]}),e.jsxs(p,{onClick:o,className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“Š"}),"Export Report"]})]}),(x.expired>0||x.critical>0)&&e.jsx("div",{className:"bg-error-50 border border-error-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸš¨"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-error-900",children:"Urgent Action Required"}),e.jsxs("p",{className:"text-sm text-error-700 mt-1",children:[x.expired>0&&`${x.expired} expired medication${x.expired>1?"s":""}`,x.expired>0&&x.critical>0&&" and ",x.critical>0&&`${x.critical} expiring within 30 days`]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Expired"}),e.jsx("p",{className:"text-3xl font-semibold text-error",children:x.expired})]}),e.jsx("div",{className:"w-12 h-12 bg-error-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"â›”"})})]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Critical (â‰¤30d)"}),e.jsx("p",{className:"text-3xl font-semibold text-error-600",children:x.critical})]}),e.jsx("div",{className:"w-12 h-12 bg-error-50 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"ðŸš¨"})})]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Warning (â‰¤90d)"}),e.jsx("p",{className:"text-3xl font-semibold text-warning",children:x.warning})]}),e.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"âš ï¸"})})]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Attention (â‰¤180d)"}),e.jsx("p",{className:"text-3xl font-semibold text-yellow-600",children:x.attention})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"â°"})})]})})]}),e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx(C,{placeholder:"Search by medication or batch...",value:c,onChange:n=>l(n.target.value),className:"flex-1"}),e.jsxs("select",{value:g,onChange:n=>j(n.target.value),className:"px-3 py-2 border border-neutral-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),N.map(n=>e.jsx("option",{value:n,children:n},n))]}),e.jsxs("select",{value:u,onChange:n=>t(n.target.value),className:"px-3 py-2 border border-neutral-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"critical",children:"Critical (â‰¤30d)"}),e.jsx("option",{value:"warning",children:"Warning (â‰¤90d)"}),e.jsx("option",{value:"attention",children:"Attention (â‰¤180d)"})]})]}),i.length===0?e.jsx(X,{icon:"âœ…",title:"No expiry alerts",description:c||g!=="all"||u!=="all"?"Try adjusting your filters":"All medications are within safe expiry dates"}):e.jsx("div",{className:"space-y-3",children:i.map(n=>{const f=P(new Date(n.expiryDate),new Date),a=f<0;return e.jsxs("div",{className:`p-4 border-2 rounded-lg transition-all ${a?"border-error-300 bg-error-50":f<=30?"border-error-200 bg-error-50":f<=90?"border-warning-200 bg-warning-50":"border-neutral-200 bg-white"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-base font-semibold text-neutral-900",children:n.name}),e.jsx(Ne,{expiryDate:n.expiryDate,size:"sm"})]}),e.jsxs("p",{className:"text-sm text-neutral-600",children:["Batch: ",n.batchNumber," â€¢ Category: ",n.category]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Expiry Date"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:se(new Date(n.expiryDate),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Current Stock"}),e.jsxs("p",{className:"text-sm font-medium text-neutral-900",children:[n.currentStock," ",n.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Supplier"}),e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:n.supplier})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Value at Risk"}),e.jsxs("p",{className:"text-sm font-medium text-neutral-900",children:["$",(n.currentStock*n.costPerUnit).toFixed(2)]})]})]}),e.jsx("div",{className:"flex gap-2 pt-3 border-t border-neutral-200",children:a?e.jsxs(e.Fragment,{children:[e.jsx(p,{size:"sm",className:"bg-error hover:bg-error-600",children:"Mark for Disposal"}),e.jsx(p,{variant:"secondary",size:"sm",children:"View Details"})]}):f<=90?e.jsxs(e.Fragment,{children:[e.jsx(p,{size:"sm",children:"Return to Supplier"}),e.jsx(p,{variant:"secondary",size:"sm",children:"Discount Sale"}),e.jsx(p,{variant:"secondary",size:"sm",children:"View Details"})]}):e.jsx(p,{variant:"secondary",size:"sm",children:"View Details"})})]},n.id)})})]})]})}function ve(){const{items:s,purchaseOrders:c,suppliers:l}=k(o=>o.reorder),g=R(),[j,u]=y.useState(!1),[t,d]=y.useState(null),i=s.filter(o=>o.status==="critical").length,x=s.filter(o=>o.status==="low").length,N=()=>{t&&(g(W({id:`PO${Date.now()}`,supplier:t.supplier,items:[{medication:t.medication,qty:t.reorderQty}],total:t.reorderQty*5,status:"pending",date:new Date().toISOString().split("T")[0]})),u(!1),d(null))};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Stock Reorder Management"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:i}),e.jsx("div",{className:"text-sm text-gray-600",children:"Critical Stock"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:x}),e.jsx("div",{className:"text-sm text-gray-600",children:"Low Stock"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:c.filter(o=>o.status==="pending").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending POs"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:s.filter(o=>o.status==="ok").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Adequate Stock"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Reorder Alerts"}),e.jsx("div",{className:"space-y-3",children:s.filter(o=>o.status!=="ok").map(o=>e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:o.medication}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${o.status==="critical"?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"}`,children:o.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Current: ",o.currentStock," | Reorder Point: ",o.reorderPoint]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Supplier: ",o.supplier]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Last Ordered: ",o.lastOrdered]})]}),e.jsx(p,{size:"sm",onClick:()=>{d(o),u(!0)},children:"Create PO"})]})},o.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recent Purchase Orders"}),e.jsx("div",{className:"space-y-3",children:c.slice(0,10).map(o=>e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:o.id}),e.jsx("p",{className:"text-sm text-gray-600",children:o.supplier}),e.jsx("p",{className:"text-sm text-gray-700",children:o.items.map(n=>`${n.medication} (${n.qty})`).join(", ")}),e.jsxs("p",{className:"text-sm text-gray-500",children:["$",o.total," â€¢ ",o.date]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${o.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:o.status})]})},o.id))})]})]}),e.jsx(A,{isOpen:j,onClose:()=>u(!1),title:"Create Purchase Order",children:t&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Medication"}),e.jsx("p",{className:"font-semibold",children:t.medication})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Supplier"}),e.jsx("p",{className:"font-semibold",children:t.supplier})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Quantity"}),e.jsxs("p",{className:"font-semibold",children:[t.reorderQty," units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Estimated Total"}),e.jsxs("p",{className:"font-semibold",children:["$",t.reorderQty*5]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(p,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(p,{onClick:N,children:"Create PO"})]})]})})]})}function be(){const{batches:s,recalls:c}=k(m=>m.batch),l=R(),[g,j]=y.useState(!1),[u,t]=y.useState(!1),[d,i]=y.useState(null),[x,N]=y.useState({medication:"",lotNumber:"",mfgDate:"",expiry:"",qty:""}),[o,n]=y.useState(""),f=s.filter(m=>m.status==="active").length,a=s.filter(m=>m.status==="recalled").length,v=()=>{l(G({...x,id:`B${Date.now()}`,status:"active",qty:parseInt(x.qty)})),j(!1),N({medication:"",lotNumber:"",mfgDate:"",expiry:"",qty:""})},b=()=>{d&&(l(J({id:`R${Date.now()}`,batchId:d.id,reason:o,date:new Date().toISOString().split("T")[0],affectedQty:d.qty})),t(!1),i(null),n(""))};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Batch/Lot Tracking"}),e.jsx(p,{onClick:()=>j(!0),children:"+ Add Batch"})]}),c.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-red-800 mb-2",children:["âš ï¸ Active Recalls (",c.length,")"]}),c.slice(0,3).map(m=>{const r=s.find(S=>S.id===m.batchId);return e.jsxs("p",{className:"text-sm text-red-700",children:[r==null?void 0:r.medication," - Lot ",r==null?void 0:r.lotNumber,": ",m.reason]},m.id)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:f}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Batches"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:a}),e.jsx("div",{className:"text-sm text-gray-600",children:"Recalled Batches"})]}),e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:s.reduce((m,r)=>m+r.qty,0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Units"})]})]}),e.jsx("div",{className:"space-y-3",children:s.map(m=>e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:m.medication}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm font-mono",children:m.lotNumber}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${m.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Mfg: ",m.mfgDate," | Expiry: ",m.expiry," | Qty: ",m.qty," units"]})]}),m.status==="active"&&e.jsx(p,{variant:"outline",size:"sm",onClick:()=>{i(m),t(!0)},children:"Recall"})]})},m.id))}),e.jsx(A,{isOpen:g,onClose:()=>j(!1),title:"Add Batch",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{label:"Medication",value:x.medication,onChange:m=>N({...x,medication:m.target.value})}),e.jsx(C,{label:"Lot Number",value:x.lotNumber,onChange:m=>N({...x,lotNumber:m.target.value})}),e.jsx(C,{label:"Manufacturing Date",type:"date",value:x.mfgDate,onChange:m=>N({...x,mfgDate:m.target.value})}),e.jsx(C,{label:"Expiry Date",type:"date",value:x.expiry,onChange:m=>N({...x,expiry:m.target.value})}),e.jsx(C,{label:"Quantity",type:"number",value:x.qty,onChange:m=>N({...x,qty:m.target.value})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(p,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(p,{onClick:v,children:"Add Batch"})]})]})}),e.jsx(A,{isOpen:u,onClose:()=>t(!1),title:"Recall Batch",children:d&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:e.jsxs("p",{className:"text-sm text-red-800",children:["âš ï¸ This will recall batch ",d.lotNumber," (",d.qty," units)"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Recall Reason"}),e.jsx("textarea",{value:o,onChange:m=>n(m.target.value),className:"w-full border rounded p-2",rows:3})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(p,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(p,{onClick:b,children:"Confirm Recall"})]})]})})]})}function we(){const{metrics:s,topMovers:c}=k(l=>l.inventoryAnalytics);return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Inventory Analytics"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[s.turnoverRate,"x"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Turnover Rate"})]}),e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-red-600",children:["$",(s.expiryWaste/1e3).toFixed(1),"K"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Expiry Waste"})]}),e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["$",(s.stockValue/1e3).toFixed(0),"K"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Stock Value"})]}),e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[s.reorderOptimization,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Reorder Efficiency"})]})]}),e.jsxs(h,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top Moving Items"}),e.jsx("div",{className:"space-y-3",children:c.map((l,g)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold",children:g+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:l.item}),e.jsxs("div",{className:"text-sm text-gray-600",children:[l.units," units sold"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["$",(l.value/1e3).toFixed(1),"K"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Revenue"})]})]},l.item))})]})]})}function Ae(){return e.jsxs(Y,{children:[e.jsx(w,{index:!0,element:e.jsx(te,{})}),e.jsx(w,{path:"prescriptions",element:e.jsx(ie,{})}),e.jsx(w,{path:"medication-requests",element:e.jsx(oe,{})}),e.jsx(w,{path:"patients",element:e.jsx(pe,{})}),e.jsx(w,{path:"inventory",element:e.jsx(ye,{})}),e.jsx(w,{path:"expiry-alerts",element:e.jsx(fe,{})}),e.jsx(w,{path:"reorder-management",element:e.jsx(ve,{})}),e.jsx(w,{path:"batch-tracking",element:e.jsx(be,{})}),e.jsx(w,{path:"inventory-analytics",element:e.jsx(we,{})})]})}export{Ae as default};
