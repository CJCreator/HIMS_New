import{j as e,B as i,C as u,I as d,Q as C,M as N,a as f,R as w,T as S,U as D,V as A}from"./index-Br-Gz1Ol.js";import{a as m,f as k,h as g}from"./vendor-Co8sLtJy.js";import{d as b,u as v}from"./redux-29f41A6q.js";import{f as y}from"./format-DxorSBJt.js";import"./ui-Bub52LCX.js";function M(){const r=b(),{allergies:o}=v(a=>a.allergies),[c,h]=m.useState(""),[x,l]=m.useState(!1),[t,n]=m.useState({patientId:"P001",allergen:"",type:"drug",severity:"moderate",reaction:"",onsetDate:"",notes:"",addedBy:"Dr. Current"}),j=o.filter(a=>a.allergen.toLowerCase().includes(c.toLowerCase())||a.reaction.toLowerCase().includes(c.toLowerCase())),p=()=>{t.allergen&&t.reaction&&(r(w(t)),l(!1),n({patientId:"P001",allergen:"",type:"drug",severity:"moderate",reaction:"",onsetDate:"",notes:"",addedBy:"Dr. Current"}))},s=a=>{switch(a){case"severe":return e.jsx(f,{status:"error",children:"Severe"});case"moderate":return e.jsx(f,{status:"pending",children:"Moderate"});default:return e.jsx(f,{status:"sent",children:"Mild"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Allergy Management"}),e.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Manage patient allergies and sensitivities"})]}),e.jsxs(i,{onClick:()=>l(!0),className:"flex items-center gap-2",children:[e.jsx("span",{children:"+"}),"Add Allergy"]})]}),e.jsxs(u,{className:"p-6",children:[e.jsx(d,{placeholder:"Search allergies...",value:c,onChange:a=>h(a.target.value),className:"mb-6"}),e.jsx("div",{className:"space-y-3",children:j.map(a=>e.jsxs("div",{className:"p-4 border-2 border-neutral-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-error-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"âš ï¸"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-neutral-900",children:a.allergen}),e.jsxs("p",{className:"text-sm text-neutral-600 capitalize",children:[a.type," allergy"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s(a.severity),e.jsx(i,{variant:"tertiary",size:"sm",className:"text-error",onClick:()=>r(C(a.id)),children:"Remove"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Reaction"}),e.jsx("p",{className:"text-sm text-neutral-900",children:a.reaction})]}),a.onsetDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Onset Date"}),e.jsx("p",{className:"text-sm text-neutral-900",children:y(new Date(a.onsetDate),"MMM dd, yyyy")})]})]}),a.notes&&e.jsxs("div",{className:"p-3 bg-neutral-50 rounded-lg mb-3",children:[e.jsx("p",{className:"text-xs text-neutral-600 mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-neutral-900",children:a.notes})]}),e.jsxs("div",{className:"text-xs text-neutral-500",children:["Added by ",a.addedBy," on ",y(new Date(a.addedAt),"MMM dd, yyyy")]})]},a.id))})]}),e.jsx(N,{isOpen:x,onClose:()=>l(!1),title:"Add New Allergy",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{label:"Allergen",value:t.allergen,onChange:a=>n({...t,allergen:a.target.value}),placeholder:"e.g., Penicillin",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Type"}),e.jsxs("select",{value:t.type,onChange:a=>n({...t,type:a.target.value}),className:"block w-full px-3 py-2 border border-neutral-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"drug",children:"Drug"}),e.jsx("option",{value:"food",children:"Food"}),e.jsx("option",{value:"environmental",children:"Environmental"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Severity"}),e.jsxs("select",{value:t.severity,onChange:a=>n({...t,severity:a.target.value}),className:"block w-full px-3 py-2 border border-neutral-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"mild",children:"Mild"}),e.jsx("option",{value:"moderate",children:"Moderate"}),e.jsx("option",{value:"severe",children:"Severe"})]})]}),e.jsx(d,{label:"Reaction",value:t.reaction,onChange:a=>n({...t,reaction:a.target.value}),placeholder:"e.g., Skin rash, difficulty breathing",required:!0}),e.jsx(d,{label:"Onset Date (Optional)",type:"date",value:t.onsetDate,onChange:a=>n({...t,onsetDate:a.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{value:t.notes,onChange:a=>n({...t,notes:a.target.value}),rows:3,className:"block w-full px-3 py-2 border border-neutral-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Additional information..."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(i,{variant:"secondary",onClick:()=>l(!1),className:"flex-1",children:"Cancel"}),e.jsx(i,{onClick:p,className:"flex-1",children:"Add Allergy"})]})]})})]})}function R(){const{records:r,inventory:o}=v(s=>s.immunization),c=b(),[h,x]=m.useState(!1),[l,t]=m.useState({vaccine:"",date:"",lot:""}),n=r.filter(s=>s.status==="overdue").length,j=r.filter(s=>{if(!s.nextDue)return!1;const a=Math.floor((new Date(s.nextDue).getTime()-Date.now())/864e5);return a>0&&a<=30}).length,p=()=>{const s=new Date(l.date);s.setFullYear(s.getFullYear()+1),c(S({...l,id:Date.now().toString(),status:"completed",nextDue:s.toISOString().split("T")[0]})),x(!1),t({vaccine:"",date:"",lot:""})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Immunization Tracker"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",children:"Generate Certificate"}),e.jsx(i,{onClick:()=>x(!0),children:"+ Record Vaccine"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:n}),e.jsx("div",{className:"text-sm text-gray-600",children:"Overdue"})]}),e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:j}),e.jsx("div",{className:"text-sm text-gray-600",children:"Due in 30 Days"})]}),e.jsxs(u,{className:"p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:r.filter(s=>s.status==="completed").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Immunization Records"}),e.jsx("div",{className:"space-y-3",children:r.map(s=>e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.vaccine}),s.date&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Given: ",s.date]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Next Due: ",s.nextDue]}),s.lot&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Lot: ",s.lot]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.status==="completed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.status})]})},s.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Vaccine Inventory"}),e.jsx("div",{className:"space-y-3",children:o.map(s=>e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.vaccine}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Min Stock: ",s.minStock]})]}),e.jsx("div",{className:`text-2xl font-bold ${s.stock<s.minStock?"text-red-600":"text-green-600"}`,children:s.stock})]})},s.vaccine))})]})]}),e.jsx(N,{isOpen:h,onClose:()=>x(!1),title:"Record Vaccination",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{label:"Vaccine Name",value:l.vaccine,onChange:s=>t({...l,vaccine:s.target.value})}),e.jsx(d,{label:"Date Given",type:"date",value:l.date,onChange:s=>t({...l,date:s.target.value})}),e.jsx(d,{label:"Lot Number",value:l.lot,onChange:s=>t({...l,lot:s.target.value})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(i,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(i,{onClick:p,children:"Record"})]})]})})]})}const I={appointment:"ðŸ“…",prescription:"ðŸ’Š",lab:"ðŸ”¬"},P={appointment:"blue",prescription:"green",lab:"purple"};function L(){const{events:r}=v(t=>t.timeline),[o,c]=m.useState("all"),[h,x]=m.useState(""),l=r.filter(t=>(o==="all"||t.type===o)&&t.title.toLowerCase().includes(h.toLowerCase()));return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Patient Timeline"}),e.jsx(i,{children:"Export Timeline"})]}),e.jsx(u,{className:"mb-6 p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(d,{placeholder:"Search events...",value:h,onChange:t=>x(t.target.value),className:"flex-1"}),e.jsxs("select",{value:o,onChange:t=>c(t.target.value),className:"border rounded px-3",children:[e.jsx("option",{value:"all",children:"All Events"}),e.jsx("option",{value:"appointment",children:"Appointments"}),e.jsx("option",{value:"prescription",children:"Prescriptions"}),e.jsx("option",{value:"lab",children:"Lab Results"})]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-300"}),e.jsx("div",{className:"space-y-6",children:l.map(t=>e.jsxs("div",{className:"relative pl-16",children:[e.jsx("div",{className:`absolute left-5 w-6 h-6 rounded-full bg-${P[t.type]}-500 flex items-center justify-center text-white text-xs`,children:I[t.type]}),e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600",children:t.date}),t.doctor&&e.jsx("p",{className:"text-sm text-gray-500",children:t.doctor}),t.result&&e.jsxs("p",{className:"text-sm text-green-600",children:["Result: ",t.result]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="completed"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:t.status})]})})]},t.id))})]})]})}function O(){const{problems:r}=v(s=>s.problemList),o=b(),[c,h]=m.useState("active"),[x,l]=m.useState(!1),[t,n]=m.useState({name:"",icd10:"",onset:"",notes:""}),j=r.filter(s=>c==="all"||s.status===c),p=()=>{o(A({...t,id:Date.now().toString(),status:"active"})),l(!1),n({name:"",icd10:"",onset:"",notes:""})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Problem List"}),e.jsx(i,{onClick:()=>l(!0),children:"+ Add Problem"})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:["active","resolved","all"].map(s=>e.jsxs("button",{onClick:()=>h(s),className:`px-4 py-2 rounded ${c===s?"bg-blue-500 text-white":"bg-gray-200"}`,children:[s.charAt(0).toUpperCase()+s.slice(1)," (",r.filter(a=>s==="all"||a.status===s).length,")"]},s))}),e.jsx("div",{className:"space-y-4",children:j.map(s=>e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm font-mono",children:s.icd10}),e.jsx("span",{className:`px-2 py-1 rounded text-sm ${s.status==="active"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:s.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Onset: ",s.onset]}),s.resolved&&e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Resolved: ",s.resolved]}),e.jsx("p",{className:"text-sm text-gray-700",children:s.notes})]}),s.status==="active"&&e.jsx(i,{variant:"outline",size:"sm",onClick:()=>o(D({id:s.id,status:"resolved"})),children:"Mark Resolved"})]})},s.id))}),e.jsx(N,{isOpen:x,onClose:()=>l(!1),title:"Add Problem",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{label:"Problem Name",value:t.name,onChange:s=>n({...t,name:s.target.value})}),e.jsx(d,{label:"ICD-10 Code",value:t.icd10,onChange:s=>n({...t,icd10:s.target.value})}),e.jsx(d,{label:"Onset Date",type:"date",value:t.onset,onChange:s=>n({...t,onset:s.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),e.jsx("textarea",{value:t.notes,onChange:s=>n({...t,notes:s.target.value}),className:"w-full border rounded p-2",rows:3})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(i,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(i,{onClick:p,children:"Add Problem"})]})]})})]})}function $(){return e.jsxs(k,{children:[e.jsx(g,{path:"allergies/:patientId",element:e.jsx(M,{})}),e.jsx(g,{path:"immunizations/:patientId",element:e.jsx(R,{})}),e.jsx(g,{path:"timeline/:patientId",element:e.jsx(L,{})}),e.jsx(g,{path:"problems/:patientId",element:e.jsx(O,{})})]})}export{$ as default};
